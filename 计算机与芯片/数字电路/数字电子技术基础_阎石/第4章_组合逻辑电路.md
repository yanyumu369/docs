##### 内容提要

本章将重点介绍组合逻辑电路的特点以及组合逻辑电路的分析方法和设计方法。首先讲述组合逻辑电路的共同特点和一般的分析方法和设计方法。然后就几种常用且经典的组合逻辑电路模块，从分析或设计的角度进行解读，并在模块的基础上，初步介绍如何用硬件描述语言描述组合逻辑电路。最后着重从物理概念上说明**竞争-冒险**现象及其成因，并扼要地介绍消除竞争-冒险现象的常用方法。

## 4.1 概述

#### 一、组合逻辑电路的特点

根据逻辑功能的不同特点，可以将数字电路分成两大类，一类称为**组合逻辑电路**（Combinational Logic Circuit,简称组合电路），另一类称为**时序逻辑电路**（Sequential Logic Circuit，简称**时序电路**）。

在组合逻辑电路中，任意时刻的输出仅仅取决于该时刻的输入，与电路原来的状态无关。这就是组合逻辑电路在逻辑功能上的共同特点。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.1.1_组合逻辑电路.png"/><br>
</div>

图 4.1.1 就是一个组合逻辑电路的例子。它有三个输入变量 $A$、$B$、$CI$ 和两个输出变量 $S$、$CO$。将图 4.1.1 的逻辑功能写成逻辑函数式的形式即可得到，
$$\begin{align} &S=(A\oplus B)\oplus CI \\\ &CO=(A\oplus B)CI+AB\end{align} \tag{4.1.1}$$

由上式可知，无论任何时刻，只要 $A$、$B$ 和 $CI$ 的取值确定了，则 $S$ 和 $CO$ 的取值也随之确定，与电路过去的工作状态无关。

从组合电路逻辑功能的特点不难想到，既然它的输出与电路的历史状况无关，那么电路中就不能包含有存储单元。这就是组合逻辑电路在电路结构上的共同特点。

#### 二、逻辑功能的描述

对于任何一个多输入、多输出的组合逻辑电路，都可以用图 4.1.2 所示的框图表示。

图中 $a_1$、$a_2$、...、$a_n$ 表示输入变量，$y_1$、$y_2$、...、$y_m$ 表示输出变量。输出与输入间的逻辑关系可以用一组逻辑函数表示

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.1.2_组合逻辑电路的框图.png"/><br>
</div>

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\公式4.1.2.png"/><br>
</div>
或者写成向量函数的形式
$$Y=F(A) \tag{4.1.3}$$

在 2.5.2 节中已经讲过，逻辑函数的描述方法除**逻辑式**以外，还有**真值表**、**逻辑图**、**波形图**等几种。因此，在分析或设计组合逻辑电路时，可以根据需要采用其中任何一种方式进行描述。

除了对组合逻辑电路的逻辑功能进行描述，在设计和实现中，还需要对其动态参数一传输延迟时间 $t_{\rm{pd}}$ 等进行描述。

## 4.4 若干常用的组合逻辑电路模块

随着数字化的浪潮席卷了电子技术应用的一切领域，人们在实践中遇到的逻辑问题层出不穷，因而为解决这些逻辑问题而设计的逻辑电路也不胜枚举。其中有些逻辑功能电路经常、大量地出现在各种数字系统当中。这些逻辑功能电路包括**编码器**、**译码器**、**数据选择器**、**数值比较器**、**运算器**等。在设计实现复杂的电路时，可以调用这些已有的、经过使用验证的电路模块，作为设计电路的组成部分。下面从设计或分析的角度分别介绍这些常用的组合逻辑模块。

### 4.4.1 编码器

**在数字系统中，为了区分一系列不同的事物，将其中的每个事物用一个二值代码表示，这就是编码的含义**。在二值逻辑电路中，信号都是以高、低电平的形式给出的。因此，**编码器（Encoder）的逻辑功能就是将输入的每一个高、低电平信号编成一个对应的二进制代码**。

### 4.4.2 译码器

**译码器（Decoder）的逻辑功能是将每个输入的二进制代码译成对应的输出高、低电平信号或另外一个代码**。因此译码是编码的反操作。常用的译码器有**二进制译码器**、**二-十进制译码器**和**显示译码器**三类。

### 4.4.3 数据选择器

在数字信号的传输过程中，有时需要从一组输入数据中选出某一个来，这时就要用到一种称为**数据选择器**（Data Selector）或**多路开关**（Multiplexer，MUX）的逻辑电路。数据选择器是一种常用模块，最小的是**二选一数据选择器**。其逻辑图形符号如图 4.4.18 所示。该符号表示通过 $SEL$ 确定 $Y$ 从 $A$ 和 $B$ 中选哪一个数据，真值表如表 4.4.8。

<div align=center>
<img width=30% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.18_二选一数据选择器.png"/><br>
</div>

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表4.4.8_二选一数据选择器的真值表.png"/><br>
</div>

由表 4.4.8 可得，二选一数据选择器的逻辑表达式为
$$Y=SEL\cdot A+SEL'\cdot B  \tag{4.4.11}$$
则可用图 4.4.19 所示的逻辑图实现二选一数据选择器。

**4 选 1 数据选择器则是从 4 个输入数据中选出一个送到输出端**。下面以双 4 选 1 数据选择器 74HC153 为例，分析它的工作原理。图 4.4.20 是 74HC153 的逻辑图，它包含两个完全相同的 4 选 1 数据选择器。两个数据选择器有公共的地址输人端，而数据输入端和输出端是各自独立的。通过给定不同的地址代码(即 $A_1A_0$ 的状态)，即可从 4 个输入数据中选出所要的一个，并送至输出端 $Y$。图中的 $S_1'$ 和 $S_2'$ 是附加控制端，用于控制电路工作状态和扩展功能。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.19_二选一数据选择器.png"/><br>
</div>

由图 4.4.20（a）可见，

- 当 $A_0=0$ 时传输门 TG<sub>1</sub> 和 TG<sub>3</sub> 导通，而 TG<sub>2</sub> 和 TG<sub>4</sub> 截止。
- 当 $A_0=1$ 时 TG<sub>1</sub> 和 TG<sub>3</sub> 截止，而 TG<sub>2</sub> 和 TG<sub>4</sub> 导通。
- 同理，当 $A_1=0$，TG<sub>5</sub> 导通、TG<sub>6</sub> 截止。
- 而 $A_1=1$ 时 TG<sub>5</sub> 截止、TG<sub>6</sub> 导通。

因此，在 $A_1A_0$ 的状态确定以后，$D_{10}\sim D_{13}$ 当中只有一个能通过两级导通的传输门到达输出端。例如，当 $A_1A_0=01$ 时，第一级传输门中的 TG<sub>2</sub> 和 TG<sub>4</sub> 导通，第二级传输门的 TG<sub>5</sub> 导通，只有 $D_{11}$ 端的输入数据能通过传输门 TG<sub>2</sub> 和 TG<sub>5</sub> 到达输出端 $Y_1$。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.20_双4选1数据选择器.png"/><br>
</div>

输出的逻辑式可写成
$$Y_1=[D_{10}(A_1'A_0')+D_{11}(A_1'A_0')+D_{12}(A_1A_0')+D_{13}(A_1A_0)]\cdot S_1  \tag{4.4.12}$$
同时，上式也表明 $S'=0$ 时数据选择器工作，$S'=1$ 时数据选择器被禁止工作，输出被封锁为低电平。

### 4.4.4 加法器

<mark>两个二进制数之间的算术运算无论是加、减、乘、除，目前在数字计算机中都是化做若干步加法运算进行的</mark>。因此，加法器是构成算术运算器的基本单元。

#### 一、1 位加法器

##### 1. 半加器

如果不考虑有来自低位的进位将两个 1 位二进制数相加，称为**半加**。实现半加运算的电路称为半加器。

按照二进制加法运算规则可以列出如表 4.4.9 所示的半加器真值表，其中 $A$、$B$ 是两个加数，$S$ 是相加的和，$CO$ 是向高位的进位。将 $S$、$CO$ 和 $A$、$B$ 的关系写成逻辑表达式则得到
$$\begin{align} &S=A'B+AB'=A\oplus B \\\ &CO=AB \end{align} \tag{4.4.13}$$

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表4.4.9_半加器的真值表.png"/><br>
</div>

因此，半加器是由一个**异或门**和一个**与门**组成的，如图 4.4.21 所示

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.21_半加器.png"/><br>
</div>

##### 2. 全加器

在将两个多位二进制数相加时，除了最低位以外，每一位都应该考虑来自低位的进位，即将两个对应位的加数和来自低位的进位 3 个数相加。这种运算称为全加，所用的电路称为**全加器**。

根据二进制加法运算规则可列出 1 位全加器的真值表，如表 4.4.10 所示。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表4.4.10_全加器的真值表.png"/><br>
</div>

画出图 4.4.22 所示的 $S$ 和 $CO$ 的卡诺图，采用合并 0 再求反的化简方法得到
$$\begin{align} &S=(A'B'CI'+AB'CI+A'BCI+ABCI')' &CO=(A'B'+B'CI'+A'CI')' \end{align} \tag{4.4.14}$$

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.22_全加器的卡诺图.png"/><br>
</div>

图 4.4.23（a）所示双全加器 74LS183 的逻辑图就是按式（4.4.14）组成的。全加器的电路结构还有多种其他形式，但它们的逻辑功能都必须符合表 4.4,10 给出的全加器真值表。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.23_双全加器.png"/><br>
</div>

#### 二、多位加法器

##### 1. 串行进位加法器

两个多位数相加时每一位都是带进位相加的，因而必须使用全加器。只要依次将低位全加器的进位输出端 $CO$ 接到高位全加器的进位输入端 $CI$，就可以构成多位加法器了。

图 4.4.24 就是根据上述原理接成的 4 位加法器电路。显然，每一位的相加结果都必须等到低一位的进位产生以后才能建立起来，因此将这种结构的电路称为**串行进位加法器**（或称为**行波进位加法器**）。

<div align=center>
<img width=70% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.24_4位串行进位加法器.png"/><br>
</div>

这种加法器的最大缺点是运算速度慢。在最不利的情况下，做一次加法运算需要经过 4 个全加器的传输延迟时间（从输入加数到输出状态稳定建立起来所需要的时间）才能得到稳定可靠的运算结果。但考虑到串行进位加法器的电路结构比较简单，因而在对运算速度要求不高的设备中，这种加法器仍不失为一种可取的电路。

##### 2. 超前进位加法器

串行进位加法器充分体现了电路设计的重用，反复使用了代入定理，但也带来了运算速度慢的弊端。为了提高运算速度，必须设法减小由于进位信号逐级传递所耗费的时间。那么高位的进位输入信号能否在相加运算开始时就知道呢？

我们知道，加到第 $i$ 位的进位输人信号是这两个加数第 $i$ 位以下各位状态的函数，所以第 $i$ 位的进位输入信号 $(CI)_i$ 一定能由 $A_{i-1}A_{i-2}...A_{0}$ 和 $B_{i-1}B_{i-2}...B_{0}$ 唯一地确定。根据这个原理，就可以通过逻辑电路事先得出每一位全加器的进位输入信号，而无需再从最低位开始向高位逐位传递进位信号了，这就有效地提高了运算速度。采用这种结构形式的加法器称为**超前进位**（Carry Look-ahead）加法器，也称为**快速进位**（Fast Carry）加法器。

### 4.4.5 数值比较器

在一些数字系统（例如数字计算机）当中经常要求比较两个数值的大小。为完成这一功能所设计的各种逻辑电路统称为**数值比较器**。

#### 一、1 位数值比较器

首先讨论两个 1 位二进制数 $A$ 和 $B$ 相比较的情况。这时有三种可能：

1. $A>B$（即 $A=1$、$B=0$），则 $AB'=1$，故可以用 $AB'$作为 $A>B$ 的输出信号 $Y_{(A>B)}$。
2. $A<B$（即 $A=0$、$B=1$），则 $A'B=1$，故可以用 $A'B$ 作为 $A<B$ 的输出信号 $Y_{(A<B)}$。
3. $A=B$，则 $A\odot B=1$，故可以用 $A\odot B$ 作为 $A=B$ 的输出信号 $Y_{(A=B)}$。

图 4.4.26 给出的是一种实用的 1 位数值比较器电路。

<div align=center>
<img width=70% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.4.26_1位数值比较器.png"/><br>
</div>

#### 二、多位数值比较器

在比较两个多位数的大小时，必须自高而低地逐位比较，而且只有在高位相等时，才需要比较地位。

## 4.5 层次化和模块化的设计方法

对于较复杂的组合逻辑电路，往往不适合用一组方程式直接描述它们的逻辑功能，因而需要用**层次化**和**模块化**的设计方法。

层次化的设计方法是指“自顶向下”对整个设计任务进行分层和分块的划分，降低每层的复杂度，简化每个模块的功能；或“自底向上”地对每一个有限复杂度的模块进行实现或调用。模块化的设计方法是指将经过设计和验证的能完成一定功能的逻辑电路封装成为模块，在后续的设计中都可反复使用。

这两种方法核心是首先将电路逐级分解为若干个简单的模块，然后再将这些模块设计好并连接起来。两种方法在设计实现中往往一起使用，这些简单的模块电路都可以用 4.3 节所讲的方法设计出来。

本节将介绍自底向上的方法。把上一节介绍的一些常用中规模模块作为已有的电路模块，利用它们进行一些电路设计和实现。最常见的一类设计方法是应用附加的控制端实现功能扩展，如下面三个例子。

## 4.6 可编程逻辑器件

从逻辑功能的特点上将数字集成电路分类，可以分为通用型和专用型两类。前面介绍到的中、小规模数字集成电路（如 74 系列及其改进系列、CC4000 系列、74HC 系列等）都属于通用型数字集成电路。它们的逻辑功能都比较简单，而且是固定不变的。由于它们的这些逻辑功能在组成复杂数字系统时经常要用到，所以这些器件有很强的通用性。

从理论上讲，用这些通用型的中、小规模集成电路可以组成任何复杂的数字系统。随着集成电路集成度越来越大，如果能把所设计的数字系统做成一片大规模集成电路，则不仅能减小电路的体积、重量、功耗，而且会使电路的可靠性大为提高。这种为某种专门用途而设计的集成电路称为**专用集成电路**，即所谓的 **ASIC**（Application Specific Integrated Circuit 的缩写）。然而，在用量不大的情况下，设计和制造这样的专用集成电路不仅成本很高，而且设计、制造的周期也太长。这是一个很大的矛盾。

**可编程逻辑器件**（Programmable Logic Device，简称 PLD）的研制成功解决了这个矛盾。可编程逻辑器件 PLD 是作为一种通用器件生产，但它的逻辑功能由用户通过对器件编程来设定的。而且，有些 PLD 的集成度很高，足以满足设计一般数字系统的需要。这样就可以由设计人员自行编程而将一个数字系统“集成”在一片 PLD 上，作成“**片上系统**”（System on Chip，简称 **SoC**），而不必去请芯片制造厂商设计和制作专用集成电路芯片了。

自 20 世纪 80 年代以来 PLD 的发展非常迅速，本节将以一种典型的 PLD 为例，介绍可编程器件的基本工作原理。

为便于画图，在描述可编程器件的内部结构时采用了图 4.6.1 中所示的逻辑图形符号，这也是目前国际、国内通行的画法。其中图（a）表示多输入端与门，图（b）是与门输出恒等于 0 时的简化画法，图（c）是多输入端或门，图（d）是互补输出的缓冲器，图（e）是三态输出缓冲器。

我们已经知道，任何一个逻辑函数式都可以变换成**与-或**表达式，因而任何一个逻辑函数都能用一级与逻辑电路和一级或逻辑电路来实现。PLD 的最初的研制思想就是源于此。最早使用的 PLD 是**现场可编程逻辑阵列**（Programmable Logic Array，简称为 PLA）。它出现于 20 世纪 70 年代的后期。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.6.1_PLD电路中门电路.png"/><br>
</div>

可编程逻辑阵列 PLA 由可编程的**与**逻辑阵列和可编程的**或**逻辑阵列以及**输出缓冲器**组成，如图 4.6.2 所示。图中的与逻辑阵列最多可以产生 8 个可编程的乘积项，或逻辑阵列最多能产生 4 个组合逻辑函数。如果编程后的电路连接情况如图中所表示的那样，则当 $OE'=0$ 时可得到
$$\begin{align} Y_3&=ABCD+A'B'C'D'\\\ Y_2&=AC+BD\\\ Y_1&=A\oplus B\\\ Y_0&=C\odot D \end{align}$$

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.6.2_PLA的基本电路结构.png"/><br>
</div>

从图 4.6.2 可以看到，PLA 的基本结构提供了一定规模的**与阵列**和**或阵列**，生产时并未定义逻辑功能，只是为实现一定规模的逻辑运算提供了资源和可能。用户根据设计需要对与阵列和或阵列进行编程设定，从而得到某种特定的逻辑功能。PLA 是 PLD 中电路结构最简单的一种，其他类型的可编程逻辑器件将在附录 1 中介绍。

## 4.9 组合逻辑电路中的竞争-冒险

### 4.9.1 竞争-冒险现象及其成因

在前面的章节里我们系统地讲述了组合逻辑电路的分析方法和设计方法。这些分析和设计都是在输入、输出处于稳定的逻辑电平下进行的。为了保证系统工作的可靠性，有必要再观察一下当输入信号逻辑电平发生变化的瞬间电路的工作情况。

首先让我们看两个最简单的例子。在图 4.9.1（a）所示的与门电路中，稳态下无论 $A=1$、$B=0$ 还是 $A=0$、$B=1$，输出皆为 $Y=0$。但是在输入信号 $A$ 从 1 跳变为 0 时，如果 $B$ 从 0 跳变为 1，而且 $B$ 首先上升到 $V_{\rm{IL(max)}}$ 以上，这样在极短的时间 $\Delta t$ 内将出现 $A$、$B$ 同时高于 $V_{\rm{IL(max)}}$ 的状态，于是便在门电路的输出端产生了极窄的 $Y=1$ 的尖峰脉冲，或称为**电压毛刺**，如图中所示（在画波形时考虑了门电路的传输延迟时间）。显然，这个尖峰脉冲不符合门电路稳态下的逻辑功能，因而它是系统内部的一种噪声。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.9.1_由于竞争而产生的尖峰脉冲.png"/><br>
</div>

同样，在图 4.9.1（b）所示的或门电路中，稳态下无论 $A=0$、$B=1$ 还是 $A=1$、$B=0$，输出都应该是 $Y=1$。但如果 $A$ 从 1 变成 0 的时刻和 $B$ 从 0 变成 1 的时刻略有差异，而且在 $A$ 下降到 $V_{\rm{IH(min)}}$ 时 $B$ 尚未上升到 $V_{\rm{IH(min)}}$，则在暂短的 $\Delta t$ 时间内将出现 $A$、$B$ 同时低于 $V_{\rm{IH(min)}}$ 的状态，使输出端产生极窄的 $Y=0$ 的尖峰脉冲。这个尖峰脉冲同样也是违背稳态下逻辑关系的噪声。

$我们将门电路两个输入信号同时向相反的逻辑电平跳变（一个从 1 变为 0，另一个从 0 变为 1）的现象称为竞争$。

应当指出，有竞争现象时不一定都会产生尖峰脉冲。例如，在图 4.9.1（a）所示的**与门**电路中，如果在 $B$ 上升到 $V_{\rm{IL(max)}}$ 之前 $A$ 已经降到了 $V_{\rm{IL(max)}}$ 以下（如图中虚线所示），这时输出端不会产生尖峰脉冲。同理，在图 4.9.1（b）所示的或门电路中，若 $A$ 下降到 $V_{\rm{IH(min)}}$ 以前 $B$ 已经上升到 $V_{\rm{IH(min)}}$ 以上（如图中虚线所示），输出端也不会有尖峰脉冲产生。

如果图 4.9.1 所示的**与门**和**或门**是复杂数字系统中的两个门电路，而且 $A$、$B$ 又是经过不同的传输途径到达的，那么在设计时往往难于准确知道 $A$、$B$ 到达次序的先后，以及它们在上升时间和下降时间上的细微差异。因此，我们只能说<mark>只要存在竞争现象，输出就有可能出现违背稳下逻辑关系的尖峰脉冲</mark>。

**由于竞争而在电路输出端可能产生尖峰脉冲的现象就称为竞争-冒险**。

### 4.9.2 检查竞争-冒险现象的方法

在输入变量每次只有一个改变状态的简单情况下，可以通过逻辑函数式判断组合逻辑电路中是否有**竞争-冒险**现象存在。

如果输出端门电路的两个输人信号 $A$ 和 $A'$ 是输入变量 $A$ 经过两个不同的传输途径而来的（如图 4.9.3 所示），那么当输入变量 $A$ 的状态发生突变时输出端便有可能产生尖峰脉冲。因此，只要输出端的逻辑函数在一定条件下能简化成
$$Y=A+A'\text{或}Y=AA'$$
则可判定存在竞争-冒险现象。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.9.3_竞争冒险.png"/><br>
</div>

如果图 4.9.3 所示电路的输出端是或非门、与非门，同样也存在竞争-冒险现象。这时的输出应能写成 $Y=(A+A')'$ 或者 $Y=(AA')'$ 的形式。

【例 4.9.1】 试判断图 4.9.4 中的两个电路中是否存在竞争-冒险现象。已知任何瞬间输入变量只可能有一个改变状态。

<div align=center>
<img width=70% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.9.4_电路.png"/><br>
</div>

图 4.9.4（a）电路输出的逻辑函数式可写为
$$Y=AB+A'C$$
当 $B=C=1$ 时，上式将成为
$$Y=A+A'$$
故图 4.9.4（a）电路中存在竞争-冒险现象。

图 4.9.4（b）电路的输出为
$$Y=(A+B)(B'+C)$$
在 $A=C=0$的条件下，上式简化为
$$Y=BB'$$
故图 4.9.4（b）电路中也存在竞争-冒险现象。

这种方法虽然简单，但局限性太大，因为多数情况下输入变量都有两个以上同时改变状态的可能性。如果输入变量的数目又很多，就更难于从逻辑函数式上简单地找出所有产生竞争-冒险现象的情况了。

将计算机辅助分析的手段用于分析数字电路以后，为我们从原理上检查复杂数字电路的竞争-冒险现象提供了有效的手段。通过在计算机上运行数字电路的模拟程序，能够迅速查出电路是否会存在竞争-冒险现象。目前已有这类成熟的程序可供选用。

另一种方法是用实验来检查电的输出端是否有因为竞争-冒险现象而产生的尖峰脉冲。这时加到输入端的信号波形应该包含输入变量的所有可能发生的状态变化。

即使是用计算机辅助分析手段检查过的电路，往往也还需要经过实验的方法检验，方能最后确定电路是否存在竞争-冒险现象。因为在用计算机软件模拟数字电路时，只能采用标准化的典型参数，有时还要做一些近似，所以得到的模拟结果有时和实际电路的工作状态会有出入。因此可以认为，只有实验检查的结果才是最终的结论。

### 4.9.3 消除竞争-冒险现象的方法

#### 一、接入滤波电容

由于竞争-冒险而产生的尖峰脉冲一般都很窄（多在几十纳秒以内），所以只要在输出端并接一个很小的**滤波电容** $C_{\rm{f}}$（如图 4.9.5（a）所示），就足以把尖峰脉冲的幅度削弱至门电路的阈值电压以下。在 TTL 电路中，$C_{\rm{f}}$ 的数值通常在**几十至几百皮法**的范围内。对于输出电阻较高的 CMOS 电路，$C_{\rm{f}}$ 的数值可以选得更小一些。

这种方法的优点是简单易行，而**缺点是增加了输出电压波形的上升时间和下降时间，使波形变坏**。

#### 二、引入选通脉冲

第二种常用的方法是在电路中引人一个选通脉冲 $p$，如图 4.9.5（a）所示。因为 $p$ 的高电平出现在电路到达稳定状态以后，所以 G<sub>0</sub>~G<sub>3</sub> 每个门的输出端都不会出现尖峰脉冲。但需注意，这时 G<sub>0</sub>~G<sub>3</sub> 正常的输出信号也将变成脉冲信号，而且它们的宽度与选通脉冲相同。例如，当输入信号 $AB$ 变成 11 以后，$Y_3$ 并不马上变成高电平，而要等到 $p$ 端的正脉冲出现时才给出一个正脉冲。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.9.5_消除竞争冒险现象的几种方法.png"/><br>
</div>

#### 三、修改逻辑设计

以图 4.9.4（a）所示电路为例，我们已经得到了它输出的逻辑函数式为 $Y=AB+A'C$，而且知道在 $B=C=1$ 的条件下，当 $A$ 改变状态时存在竞争-冒险现象。

根据逻辑代数的常用公式可知
$$Y=AB+A'C=AB+A'C+BC  \tag{4.9.1}$$
我们发现，在增加了 $BC$ 项以后，在 $B=C=1$ 时无论 $A$ 如何改变，输出始终保持 $Y=1$。因此，$A$ 的状态变化不再会引起竞争-冒险现象。

因为 $BC$ 一项对函数 $Y$ 来说是多余的，所以将它称为 $Y$ 的**冗余项**，同时将这种修改逻辑设计的方法称为增加冗余项的方法。增加冗余项以后的电路如图 4.9.6 所示。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图4.9.6_增加冗余项.png"/><br>
</div>

用增加冗余项的方法消除竞争一冒险现象适用范围是很有限的。由图 4.9.6 所示电路中不难发现，如果 $A$ 和 $B$ 同时改变状态，即 $AB$ 从 10 变为 01 时，电路仍然存在竞争-冒险现象。可见，增加了冗余项 $BC$ 以后仅仅消除了在 $B=C=1$ 时，由于 $A$ 的状态改变所导致的竞争-冒险。

将上述三种方法比较一下不难看出，

- 接滤波电容的方法简单易行，但输出电压的波形随之变坏。因此，只适用于对输出波形的前、后沿无严格要求的场合。
- 引入选通脉冲的方法也比较简单，而且不需要增加电路元件。但使用这种方法时必须设法得到一个与输入信号同步的选通脉冲，对这个脉冲的宽度和作用的时间均有严格的要求。
- 至于修改逻辑设计的方法，倘能运用得当，有时可以收到令人满意的效果。例如，在图 4.9.6 所示的电路中，如果门 G<sub>5</sub> 在电路中本来就已存在，那么只需增加一根连线，把它的输出引到门 G<sub>4</sub> 的一个输人端就行了，既不必增加门电路，又不给电路的工作带来任何不利的影响。然而，这样有利的条件并不是任何时候都存在，而且这种方法能解决的问题也是很有限的。


