## 内容提要

本章系统地讲述了数字集成电路中的基本逻辑单元电路—**门电路**。

由于门电路中的二极管和三极管经常工作在开关状态，所以首先介绍了它们在开关状态下的工作特性。然后，重点讨论了目前广泛使用的 **CMOS 门电路**和 **TTL 门电路**。对于每一种门电路，除了讲解它们的工作原理和逻辑功能以外，还着重介绍了它们作为电子器件的电气特性，特别是输入特性和输出特性，以便为实际使用这些器件打下必要的基础。最后，也对 ECL 电路和 BiCMOS 电路作了简单介绍。

## 3.1 概述

用以实现基本逻辑运算和复合逻辑运算的单元电路称为**门电路**（Gate Circuit）或**逻辑门**（Logic Gate）。门电路是数字集成电路中最基本的逻辑单元。与上一章里所讲的基本逻辑运算和复合逻辑运算相对应，常用的门电路在逻辑功能上有**与门**、**或门**、**非门**、**与非门**、**或非门**、**与或非门**、**异或门**等几种。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.1.1_基本开关电路.png"/><br>
</div>

在电子电路中，用高、低电平分别表示二值逻辑的 1 和 0 两种逻辑状态。获得高、低输出电平的基本原理可以用图 3.1.1 中的两个电路说明。在图 3.1.1（a）所示的**单开关电路**中，当开关 S 断开时，输出电压 $v_{\rm{O}}$ 为高电平（$V_{\rm{CC}}$）；而当 S 接通以后，输出便为低电平（等于零）。**开关 S 是用半导体三极管组成的**。只要能通过输入信号，控制三极管工作在截止和导通两个状态，它们就可以起到图中开关 S 的作用。

单开关电路的主要缺点是功耗比较大。当 S 导通使 $v_{\rm{O}}$ 为低电平时，电源电压全部加在电阻 $R$ 上，消耗在 $R$ 上的功率为 $V_{\rm{DD}}^2/R$。为了克服这个缺点，将单开关电路中的电阻用另外一个开关代替，就形成了图 3.1.1（b） 所示的**互补开关电路**。在互补开关电路中，$S_1$ 和 $S_2$ 两个开关虽然受同一个输入信号 $v_{\rm{I}}$ 控制，但它们的开关状态是相反的。当 $v_{\rm{I}}$ 使 $S_2$ 接通的同时，使 $S_1$ 断开，则 $v_{\rm{O}}$ 为低电平；当 $v_{\rm{I}}$ 使 $S_1$ 接通的同时，使 $S_2$ 断开，则 $v_{\rm{O}}$ 为高电平。因为无论 $v_{\rm{O}}$ 是高电平还是低电平，$S_1$ 和 $S_2$ 总有一个是断开的，所以流过 $S_1$ 和 $S_2$ 的电流始终为零，电路的功耗极小。因此，这种互补式的开关电路在数字集成电路中得到了广泛应用。

以高、低电平表示两种不同逻辑状态时，有两种定义方法。如果以高电平表示逻辑 1，以低电平表示逻辑 0，则称这种表示方法为**正逻辑**。反之，若以高电平表示逻辑 0，而以低电平表示逻辑 1，则称这种表示方法为**负逻辑**，如图 3.1.2 所示。今后除非特殊说明，本书中一律采用正逻辑。

<div align=center>
<img width=30% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.1.2_正逻辑与负逻辑.png"/><br>
</div>

因为在实际工作时只要能区分出来高、低电平就可以知道它所表示的逻辑状态了，所以高、低电平都有一个允许的范围，如图 3.1.2 所示。正因为如此，**在数字电路中无论是对元、器件参数精度的要求还是对供电电源稳定度的要求，都比模拟电路要低一些**。而**提高数字电路的运算精度可以通过增加数字信号的位数达到**。

用以实现基本逻辑运算和复合逻辑运算的单元电路称为**门电路**。与上一章里所讲的基本逻辑运算和复合逻辑运算相对应，常用的门电路在逻辑功能上有**与门**、**或门**、**非门**、**与非门**、**或非门**、**与或非门**、**异或门**等几种。由于任何复杂的逻辑运算都可以用这些门电路的基本逻辑运算组合而成，所以这些门电路也自然地成为数字集成电路中的基本单元。

在最初的数字逻辑电路中，每个门电路都是用若干个分立的半导体器件和电阻、电容连接而成的。不难想象，用这种单元电路组成大规模的数字电路是非常困难的，这就严重地制约了数字电路的普遍应用。

1961 年美国**得克萨斯仪器公司**（TI）率先将数字电路的元、器件制作在同一片硅片上，制成了**集成电路**（Integrated Circuits，简称为 IC）。由于集成电路的体积小、重量轻、可靠性高，因而在数字电路的大多数应用领域里迅速取代了**分立器件电路**。随着集成电路工艺水平的不断进步，集成电路的集成度也不断提高。今天我们已经可以把十分复杂的数字系统制作在一个很小的硅片上，构成“**片上系统**”（System on Chip，简称 SOC）。

根据集成度的高、低，可以将数字集成电路划分为**小规模集成电路**（Small Scale Integration，简称为 SSI）、**中规模集成电路**（Medium Scale Integration，简称为 MSI）、**大规模集成电路**（LargeScale Integration，简称为 LSI）、**超大规模集成电路**（Very Large Scale Integration，简称为 VLSI）和**甚大规模集成电路**（Ultra Large Scale Integration，简称为 ULSI）。通常认为 SSI 电路包含的门电路不超过 10 个，MSI 电路中包含的门电路数目为 10\~100 个，LSI 电路中包含的门电路数目为 100\~10,000 个，VLSI 电路中包含的门电路数目为 10,000\~100,000 个，ULSI 电路包含的门电路数目在 100,000 个以上。

从制造工艺的类型上又可以将数字集成电路分为**双极型**、**单极型**和**混合型**三种。在数字集成电路发展的历史过程中，首先得到推广应用的是**双极型的 TTL 电路**。<mark>然而 TTL 电路存在着一个严重的缺点，就是功耗比较大。因此，TTL 电路只能制成小规模和中规模的集成电路</mark>。

在**单极型数字集成电路**当中，目前用得最多的要属 **CMOS 集成电路**了。CMOS 集成电路是“互补金属-氧化物半导体（Complementaly Metal-Oxide Semiconductor，简称 CMOS）集成电路”的简称。它出现于 20 世纪 60 年代后期，由于使用了**单极型的 MOS 管**，所以属于单极型集成电路。**CMOS 电路最突出的优点是功耗极低，非常适合于制作大规模集成电路，而降低功耗对于各种便携式电子设备尤为重要**。因此，CMOS 电路便逐渐取代了 TTL 电路而成为数字集成电路的主流产品。

此外，还可以根据逻辑功能的特点将数字集成电路产品分为**标准化系列逻辑器件**、**专用集成电路**和**可编程逻辑器件**（PLD）几种类型。每一种标准化系列逻辑器件和专用集成电路内部电路的连接是固定的，所以它们的逻辑功能也是固定不变的。而可编程逻辑器件则不同，它们内部单元之间的连接是通过“写入”编程数据来确定的。因此，写入不同的编程数据就可以得到不同的逻辑功能。

## 3.2 半导体二极管门电路

### 3.2.1 半导体二极管的开关特性

由于半导体二极管（Diod）具有**单向导电性**，即外加正向电压时导通，外加反向电压时截止，所以它相当于一个受外加电压极性控制的开关。用它取代图 3.1.1 中的开关 S，可以得到图 3.2.1 所示的二极管开关电路。

<div align=center>
<img width=30% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.2.1_二极管开关电路.png"/><br>
</div>

假定输人信号的高电平 $V_{\rm{IH}}=V_{\rm{CC}}$，低电平 $V_{\rm{IL}}=0$，并假定二极管 D 为理想开关元件，即正向导通电阻为 0，反向内阻为无穷大，则当 $v_{\rm{I}}=V_{\rm{IH}}$ 时，D 截止，$v_{\rm{O}}=V_{\rm{OH}}=V_{\rm{CC}}$；而当 $v_{\rm{I}}=V_{\rm{IL}}=0$ 时，D 导通，$v_{\rm{O}}=V_{\rm{OL}}=0$。

因此，可以用 $v_{\rm{I}}$ 的高、低电平控制二极管的开关状态，并在输出端得到相应的高、低电平输出信号。

然而，我们在分析各种实际的二极管电路时发现，由于二极管的特性并不是理想的开关特性，所以并不是任何时候都能满足上面对二极管特性所做的假定。根据半导体物理理论得知，二极管的特性可以近似地用式（3.2.1）的 **PN 结方程**和图 3.2.2 所示的伏安特性曲线描述，即
$$i=I_{\rm{S}}(e^{v/V_{\rm{T}}}-1) \tag{3.2.1}$$
其中 $i$ 为流过二极管的电流，$v$ 为加到二极管两端的电压，$V_{\rm{T}}=\frac{nkT}{q}$。这里的 $k$ 为玻尔兹曼常数，$T$ 为热力学温度，$q$ 为电子电荷。$n$ 是一个修正系数。对于一般分立器件二极管的缓变结，$n\approx  2$；而对于一般数字集成电路中的 PN 结，$n\approx  1$。常温下（即结温为 27℃，$T=300K$）$V_{\rm{T}}\approx  26\rm{mV}$。式中的 $I_{\rm{S}}$ 称为**反向饱和电流**，它和二极管的材料、工艺和几何尺寸有关，对每只二极管是一个定值。

由式（3.2.1）和图 3.2.2 所示的曲线不难看出，实际的半导体二极管反向电阻不是无穷大，正向电阻也不是 0。而且，电压和电流之间是非线性关系。此外，由于存在着 **PN 结表面的漏电阻**以及**半导体的体电阻**，所以真正的二极管的伏安特性与式（3.2.1）所给出的曲线略有差异。

<div align=center>
<img width=30% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.2.2_二极管的伏安特性.png"/><br>
</div>

在分析二极管组成的电路时，虽然可以选用精确的二极管模型电路并通过计算机辅助分析求出准确的结果，然而在多数情况下，需要通过近似的分析迅速判断二极管的开关状态。为此，经常需要利用近似的简化特性，以简化分析和计算过程。

图 3.2.3 给出了二极管的三种近似的伏安特性曲线和对应的等效电路

<div align=center>
<img width=90% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.2.3_二极管伏安特性的几种近似方法.png"/><br>
</div>

1. **当外电路的等效电源** $V_{\rm{CC}}$ **和等效电阻** $R_{\rm{L}}$，**都很小时**，二极管的正向导通压降和正向电阻都不能忽略，这时可以用图 3.2.3（a）中的折线作为二极管的近似特性，并得到如图 3.2.3（a）中所示的等效电路。
2. **当二极管的正向导通压降和外加电源电压相比不能忽略，而二极管的正向电阻相比于外接电阻可以忽略时**，可采用图 3.2.3（b）中所示的近似特性和等效电路。当加到二极管两端的电压小于 $V_{\rm{ON}}$ 时，流过二极管的电流近似地看作为 0。当外加电压大于 $V_{\rm{ON}}$ 以后，二极管导通，而且电流增加时二极管两端的电压基本不变，仍等于 $V_{\rm{ON}}$。在下面将要讨论到的开关电路中，多数都符合这种工作条件（即外加电源电压较低而外接电阻较大），因此经常采用这种近似方法。
3. 当二极管的正向导通压降和正向电阻与电源电压和外接电阻相比均可忽略时，可以将二极管看作理想开关，用图 3.2.3（c）中与坐标轴重合的折线近似代替二极管的伏安特性。

在动态情况下，亦即加到二极管两端的电压突然反向时，电流的变化过程如图 3.2.4 所示。由于外加电压由反向突然变为正向时，要等到 PN 结内部建立起足够的电荷梯度后才开始有扩散电流形成，因而正向导通电流的建立要稍微滞后一点。当外加电压突然由正向变为反向时，因为 PN 结内尚有一定数量的存储电荷，所以有较大的瞬态反向电流流过，如图 3.2.4 所示。随着存储电荷的消散，反向电流迅速衰减并趋近于稳态时的反向饱和电流。瞬态反向电流的大小和持续时间的长短取决于正向导通时电流的大小、反向电压和外电路电阻的阻值，而且与二极管本身的特性有关。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.2.4_二极管的动态电流波形.png"/><br>
</div>
反向电流持续的时间用反向恢复时间 $t_{\rm{re}}$ 来定量描述。$t_{\rm{re}}$ 是指反向电流从它的峰值衰减到峰值的十分之一所经过的时间。由于 $t_{\rm{re}}$ 的数值很小，在几纳秒以内，所以用普通的示波器不容易看到反向电流的瞬态波形。

### 3.2.2 二极管与门

最简单的**与门**可以用二极管和电阻组成。图 3.2.5 所示是有两个输入端的与门电路，图中 $A$、$B$ 为两个输入变量，$Y$ 为输出变量。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.2.5_二极管与门.png"/><br>
</div>

设 $V_{\rm{CC}}=5\rm{V}$，$A$、$B$ 输入端的高、低电平分别为 $V_{\rm{IH}}=3\rm{V}$，$V_{\rm{IL}}=0\rm{V}$，二极管 D<sub>1</sub>、D<sub>2</sub> 的正向导通压降 $V_{\rm{DF}}=0.7\rm{V}$。由图可见，$A$、$B$ 当中只要有一个是低电平 0 V，则必有一个二极管导通，使 $Y$ 为 0.7 V。只有 $A$、$B$ 同时为高电平 3 V 时，$Y$ 才为 3.7 V。将输出与输入逻辑电平的关系列表，即得表 2.3.1。

如果规定 3 V 以上为高电平，用逻辑 1 表示；0.7 V 以下为低电平，用逻辑 0 表示，则可将表 3.2.1 改写成表 3.2.2 的真值表。显然，$Y$ 和 $A$、$B$ 是与逻辑关系。通常也用与逻辑运算的图形符号作为与门电路的逻辑符号。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表3.2.1_逻辑电平.png"/><br>
</div>

这种与门电路虽然很简单，但是存在着严重的缺点。

- 首先，输出的高、低电平数值和输入的高、低电平数值不相等，相差一个二极管的导通压降。如果把这个门的输出作为下一级门的输入信号，将发生信号高、低电平的偏移。
- 其次，**当输出端对地接上负载电阻时，负载电阻的改变有时会影响输出的高电平**。

<mark>因此，这种二极管与门电路仅用作集成电路内部的逻辑单元，而不用在集成电路的输出端直接去驱动负载电路</mark>。

### 3.2.3 二极管或门

最简单的或门电路如图 3.2.6 所示，它也是由二极管和电阻组成的。图中 $A$、$B$ 是两个输入变量，$Y$ 是输出变量。

若输入的高、低电平分别为 $V_{\rm{IH}}=3\rm{V}$，$V_{\rm{IL}}=0\rm{V}$，二极管 D<sub>1</sub>、D<sub>2</sub> 的导通压降为 0.7 V，则只要 $A$、$B$ 当中有一个是高电平，输出就是 2.3 V。只有当 $A$、$B$ 同时为低电平时，输出才是 0 V。因此，可以列出表 3.2.3 的电平关系表。如果规定高于 2.3 V 为高电平，用逻辑 1 表示；而低于 0 V 为低电平，用逻辑 0 表示，则可将表 3.2.3 改写为表 3.2.4 所示的真值表。显然，$Y$ 和 $A$、$B$ 之间是或逻辑关系。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表3.2.3_逻辑电平.png"/><br>
</div>

二极管或门同样存在着输出电平偏移的问题，所以这种电路结构也只用于集成电路内部的逻辑单元。可见，仅仅用二极管门电路无法制作具有标准化输出电平的集成电路。

## 3.3 CMOS 门电路

### 3.3.1 MOS 管的开关特性

在 CMOS 集成电路中，以金属-氧化物-半导体场效应晶体管（Metal--Oxide-Semiconductor Field--Effect Transistor，简称 MOS 管）作为开关器件。

#### 一、MOS 管的结构和工作原理

图 3.3.1 所示是 MOS 管的结构示意图和符号。在 P 型半导体衬底（图中用 B 标示）上，制作两个高参杂浓度的 N 型区，形成 MOS 管的**源极** S（Source）和**漏极** D（Drain）。第三个电极称为**栅极** G（Gte），通常用**金属铝**或**多晶硅**制作。栅极和衬底之间被二氧化硅绝缘层隔开，绝缘层的厚度极薄，在 0.1μm 以内。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.1_MOS管.png"/><br>
</div>

如果在漏极和源极之间加上电压 $v_{\rm{DS}}$，而令栅极和源极之间的电压 $V_{\rm{GS}}=0$，则由于漏极和源极之间相当于两个 PN 结背向地串联，所以 D-S 间不导通，$i_{\rm{D}}=0$。

当栅极和源极之间加有正电压 $v_{\rm{GS}}$，而且 $v_{\rm{GS}}$ 大于某个电压值 $v_{\rm{GS(th)}}$，时，由于栅极与衬底间电场的吸引，使衬底中的少数载流子一电子聚集到栅极下面的衬底表面，形成一个 N 型的**反型层**。这个反型层就构成了 D-S 间的导电沟道，于是有 $i_{\rm{D}}$ 流通。$v_{\rm{GS(th)}}$ 称为 MOS 管的**开启电压**。因为导电沟道属于 N 型，而且在 $V_{\rm{GS}}=0$ 时不存在导电沟道，必须加以足够高的栅极电压才有导电沟道形成，所以将这种类型的 MOS 管称为 **N 沟道增强型 MOS 管**。

随着 $v_{\rm{GS}}$ 的升高，导电沟道的截面积也将加大，$i_{\rm{D}}$ 增加。因此，可以通过改变 $v_{\rm{GS}}$ 控制 $i_{\rm{D}}$。的大小。

为防止有电流从衬底流向源极和导电沟道，通常将衬底与源极相连，或将衬底接到系统的最低电位上。

#### 二、MOS 管的输入特性和输出特性

若以栅极-源极间的回路为输入回路，以漏极-源极间的回路为输出回路，则称为**共源接法**，如图 3.3.2（a）所示。由图 3.3.1 可见，栅极和衬底间被二氧化硅绝缘层所隔离，在栅极和源极间加上电压 $v_{\rm{GS}}$ 以后，不会有栅极电流流通，可以认为栅极电流等于零。因此，就不必要再画输入特性曲线来表示了。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.2_MOS管共源接法.png"/><br>
</div>

图 3.3.2（b）给出了共源极接法下的输出特性曲线。这个曲线又称为 MOS 管的**漏极特性曲线**。

漏记特性曲线分为三个工作区。

- 当 $v_{\rm{GS}}<v_{\rm{GS(th)}}$ 时，漏极和源极之间没有导电沟道，$i_{\rm{D}}\approx 0$。这时 D-S 间的内阻非常大，可达 $10^9\Omega$ 以上。因此，将曲线上 $v_{\rm{GS}}<v_{\rm{GS(th)}}$ 的区域称为**截止区**。
- 当 $v_{\rm{GS}}>v_{\rm{GS(th)}}$ 以后，D-S 间出现导电沟道，有 $i_{\rm{D}}$ 产生。曲线上 $v_{\rm{GS}}>v_{\rm{GS(th)}}$ 的部分又可分为两个区域。
  - 图 3.3.2（b） 所示漏极特性上虚线左边的区域称为**可变电阻区**。在这个区域里，当 $v_{\rm{GS}}$ 一定时，$i_{\rm{D}}$ 与 $v_{\rm{DS}}$ 之比近似地等于一个常数，具有**类似于线性电阻**的性质。等效电阻的大小和 $v_{\rm{GS}}$ 的数值有关。在 $v_{\rm{DS}}\approx 0$ 时，MOS 导通电阻 $R_{\rm{ON}}$ 和 $v_{\rm{GS}}$ 的关系由下式给出
    $$\left.R_{\rm{ON}}\right|_{v_{\rm{DS}}=0}=\frac{1}{2 K\left(v_{\rm{GS}}-V_{\rm{GS}(\rm{th})}\right)} $$
    上式表明，在 $v_{\rm{GS}}\gg v_{\rm{GS(th)}}$ 的情况下，$R_{\rm{ON}}$ 近似地与 $v_{\rm{GS}}$ 成反比。为了得到较小的导通电阻，应取尽可能大的 $v_{\rm{GS}}$ 值。
  - 图 3.3.2（b）中漏极特性曲线上虚线以右的区域称为**恒流区**。恒流区里漏极电流 $i_{\rm{D}}$ 的大小基本上由 $v_{\rm{GS}}$ 决定，$v_{\rm{DS}}$ 的变化对 $i_{\rm{D}}$ 的影响很小。$i_{\rm{D}}$ 与 $v_{\rm{GS}}$ 的关系由下式给出
    $$i_{\rm{D}}=I_{\rm{DS}}\left(\frac{v_{\rm{GS}}}{V_{\rm{GS}(\rm{th})}}-1\right)^2 $$
    其中 $I_{\rm{DS}}$ 是 $v_{\rm{GS}}=2V_{\rm{GS(th)}}$ 时的 $i_{\rm{D}}$ 值。不难看出，在 $v_{\rm{GS}}\gg v_{\rm{GS(th)}}$ 的条件下，$i_{\rm{D}}$ 近似地与 $v_{\rm{GS}}^2$ 成正比。表示 $i_{\rm{D}}$ 与 $v_{\rm{GS}}$ 关系的曲线称为 MOS 管的转移特性曲线，如图 3.3.3 所示。这条曲线也可以从漏极特性曲线做出。在恒流区中 $v_{\rm{DS}}$ 为不同数值时对转移特性的影响不大。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.3_MOS管的转移特性曲线.png"/><br>
</div>

#### 三、MOS 管的基本开关电路

以 M0S 管取代图 3.1.1（a）中的开关 S，便得到了图 3.3.4 所示的 **MOS 管开关电路**。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.4_MOS管的基本开关电路.png"/><br>
</div>

### CMOS 反相器的结构和工作原理

CMOS 反相器（亦称为非门）的电路结构是 CMOS 电路的基本结构形式。同时，CMOS 反相器和下面将会介绍的 CMOS 传输门又是构成复杂 CMOS 逻辑电路的两种基本单元。因此，我们需要对 CMOS 反相器的工作原理和电气特性做比较全面和深入的分析。

#### 一、CMOS 反相器的电路结构

CMOS 反相器的基本电路结构形式为图 3.3.11 所示的**有源负载反相器**，其中 T<sub>1</sub> 是 P 沟道增强型 MOS 管，T<sub>2</sub> 是 N 沟道增强型 MOS 管。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.11_CMOS反相器.png"/><br>
</div>

#### 二、电压传输特性和电流传输特性

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.12_CMOS反相器的电压传输特性.png"/><br>
</div>

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.13_CMOS反相器的电流传输特性.png"/><br>
</div>

### 3.3.4 CMOS 反相器的动态特性

在 CMOS 反相器的静态特性一节里，我们所讨论的是电路处于稳定状态下的输入特性和输出特性。而动态特性所要讨论的是**当电路状态转换过程中**所表现出来的一些性质。

#### 一、传输延迟时间

由于 MOS 管的电极之间以及电极与衬底之间都存在**寄生电容**，尤其在反相器的输出端更不可避免地存在着负载电容（当负载为下一级反相器时，下一级反相器的输入电容和接线电容就构成了这一级的负载电容），当输入信号发生跳变时，输出电压的变化必然滞后于输入电压的变化。我们把**输出电压变化落后于输入电压变化的时间称为传输延迟时间**，并且将输出由高电平跳变为低电平时的传输延迟时间记做 $t_{\rm{PHL}}$，将输出由低电平跳变为高电平时的传输延迟时间记做 $t_{\rm{PLH}}$。在 CMOS 电路中，$t_{\rm{PHL}}$ 和 $t_{\rm{PLH}}$ 是以输人和输出波形对应边上等于最大幅度 50% 的两点间时间间隔来定义的，如图 3.3.22 所示。因为 CMOS 电路的 $t_{\rm{PHL}}$ 和 $t_{\rm{PLH}}$ 通常是相等的，所以也经常以平均传输延迟时间 $t_{\rm{pd}}$ 表示 $t_{\rm{PHL}}$ 和 $t_{\rm{PLH}}$。

<div align=center>
<img width=90% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.22_CMOS反相器传输延迟时间的定义.png"/><br>
</div>

一般情况下，$t_{\rm{PHL}}$、$t_{\rm{PLH}}$ 主要是由于负载电容的充放电所产生的，所以为了缩短传输延迟时间，必须减小负载电容和 MOS 管的导通电阻。由式（3.3.1）可知，为了减小 MOS 管的导通电阻，应当尽可能地提高电源电压和输入信号的高电平。

美国 TI 公司生产的 74HC 系列 CMOS 反相器 74HC04 在 $V_{\rm{DD}}=5\rm{V}$、负载电容 $C_{\rm{L}}=50\rm{pF}$ 的条件下，$t_{\rm{pd}}$ 仅为 9 ns。而改进系列的 74HC04，$t_{\rm{pd}}$ 只有 5 ns。

### 3.3.5 其它类型的 CMOS 门电路

#### 一、各种逻辑功能的 CMOS 门电路

在 CMOS 门电路的系列产品中，除反相器外常用的还有或非门、与非门、或门、与门、与或非门、异或门等几种。

为了画图的方便，并能突出电路中与逻辑功能有关的部分，以后在讨论各种逻辑功能的门电路时就不再画出每个输入端的保护电路了。

图 3.3.28 是 CMOS 与非门的基本结构形式，它由两个并联的 P 沟道增强型 MOS 管 T<sub>1</sub>、$T_3$ 和两个串联的 N 沟道增强型 MOS 管 T<sub>2</sub>、$T_4$ 组成。

- 当 $A=1$、$B=0$ 时，$T_3$ 导通、$T_4$ 截止，故 $Y=1$。
- 当 $A=0$、$B=1$ 时，T<sub>1</sub> 导通、T<sub>2</sub> 截止，也使 $Y=1$。
- 只有在 $A=B=1$ 时，T<sub>1</sub> 和 $T_3$ 同时截止、T<sub>2</sub> 和 $T_4$ 同时导通，才有 $Y=0$。因此，$Y$ 和 $A$、$B$ 间是与非关系，即 $Y=(A\cdot B)'$。

图 3.3.29 是 CMOS **或非门**的基本结构形式，它由两个并联的 N 沟道增强型 MOS 管 T<sub>2</sub>、$T_4$ 和两个串联的 P 沟道增强型 MOS 管 T<sub>1</sub>、$T_3$ 组成。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.28_CMOS与非和或非门.png"/><br>
</div>

在这个电路中，只要 $A$、$B$ 当中有一个是高电平，输出就是低电平。只有当 $A$、$B$ 同时为低电平时，才使 T<sub>2</sub> 和 $T_4$ 同时截止、T<sub>1</sub> 和 $T_3$ 同时导通，输出为高电平。因此，$Y$ 和 $A$、$B$ 间是或非关系，即 $Y=(A+B)'$。

利用**与非**门、**或非**门和反相器又可组成**与门**、**或门**、**与或非门**、**异或门**等。例如，在图 3.3.28 与非门的输出端再接人一级反相器，就得到了与门。

图 3.3.28 所示的**与非**门电路虽然结构很简单，但也存在着严重的缺点。首先，它的输出电阻（内阻） $R_{\rm{O}}$ 受输入端状态的影响。假定每个 MOS 管的导通内阻均为 $R_{\rm{ON}}$，截止内阻 $R_{\rm{OFF}}\approx \infty$，则根据前面对图 3.3.28 的分析可知：

- 若 $A=B=1$，则 $R_{\rm{O}}=R_{\rm{ON2}}+R_{\rm{ON4}}=2R_{\rm{ON}}$；
- 若 $A=B=0$，则 $R_{\rm{O}}=R_{\rm{ON1}}//R_{\rm{ON3}}=\frac{1}{2}R_{\rm{ON}}$；
- 若 $A=1$、$B=0$，则 $R_{\rm{O}}=R_{\rm{ON3}}=R_{\rm{ON}}$；
- 若 $A=0$、$B=1$，则 $R_{\rm{O}}=R_{\rm{ON1}}=R_{\rm{ON}}$。

可见，输入状态的不同可以使输出电阻相差 4 倍之多。

其次，输出的高、低电平受输入端数目的影响。输入端数目越多，串联的驱动管数目也越多，输出的低电平 $V_{\rm{OL}}$ 也越高。而当输人全部为低电平时，输人端越多负载管并联的数目越多，输出高电平 $V_{\rm{OH}}$ 也更高一些。

此外，输入端工作状态不同时对电压传输特性也有一定的影响。图 3.3.29 所示的或非门电路中也存在类似的问题。

为了克服这些缺点，在实际生产的 CMOS 电路中均采用**带缓冲级的结构**，就是在门电路的每个输入端、输出端各增设一级反相器。加进的这些具有标准参数的反相器称为**缓冲器**。

需要注意的一点是，输入、输出端加进缓冲器以后，电路的逻辑功能也发生了变化。图 3.3.30 所示的与非门电路是在图 3.3.29 所示的或非门电路的基础上增加了缓冲器以后得到的。**在原来与非门的基础上增加缓冲级以后就得到了或非门电路**，如图 3.3.31 所示。图 3.3.30 和图 3.3.31 就是实际生产的与非门和或非门器件的内部电路结构。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.31_带缓冲级的CMOS或非门电路.png"/><br>
</div>

这些带缓冲级的门电路其输出电阻、输出的高、低电平以及电压传输特性将不受输人端状态的影响。而且，电压传输特性的转折区也变得更陡了。此外，前面讲到的 CMOS 反相器的输入特性和输出特性对这些门电路自然也适用。

#### 三、CMOS 传输门

利用 P 沟道 MOS 管和 N 沟道 MOS 管的互补性可以接成如图 3.3.36 所示的 CMOS 传输门。CMOS 传输门如同 CMOS 反相器一样，也是构成各种逻辑电路的一种基本单元电路。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.36_CMOS传输门.png"/><br>
</div>

图 3.3.36 中的 T<sub>1</sub> 是 N 沟道增强型 MOS 管，T<sub>2</sub> 是 P 沟道增强型 MOS 管。因为 T<sub>1</sub> 和 T<sub>2</sub> 的源极和漏极在结构上是完全对称的，所以栅极的引出端画在栅极的中间。T<sub>1</sub> 和 T<sub>2</sub> 的源极和漏极分别相连作为传输门的输入端和输出端。$C$ 和 $C'$ 是一对互补的控制信号。

如果传输门的一端接输入正电压 $V_{\rm{I}}$，另一端接负载电阻 $R_\rm{L}$，则 T<sub>1</sub> 和 T<sub>2</sub> 的工作状态将如图 3.3.37 所示。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.37_CMOS传输门.png"/><br>
</div>

设控制信号 $C$ 和 $C'$ 的高、低电平分别为 $V_{\rm{DD}}$ 和 0 V，那么当 $C=0$、$C'=1$ 时，只要输入信号的变化范围不超过 $0\sim V_{\rm{DD}}$，则 T<sub>1</sub> 和 T<sub>2</sub> 同时截止，输入和输出之间呈高阻态（$>10^9\Omega$），传输门截止。〔栅-引出端间电压和栅-输入端电压均要超过截止电压才能导通〕

反之，若 $C=1$、$C'=0$，而且在 $R_{\rm{L}}$ 远大于 T<sub>1</sub>、T<sub>2</sub> 的导通电阻的情况下，则当 $0<V_{\rm{I}}<V_{\rm{DD}}-V_{\rm{GS(th)N}}$ 时 T<sub>1</sub> 将导通。而当 $V_{\rm{GS(th)P}<V_{\rm{I}}<V_{\rm{DD}}$ 时 T<sub>2</sub> 导通。因此，$V_{\rm{I}}$ 在 $0\sim V_{\rm{DD}}$ 之间变化时，T<sub>1</sub> 和 T<sub>2</sub> 至少有一个是导通的，使 $V_{\rm{I}}$ 与 $v_{\rm{O}}$ 两端之间呈低阻态（小于 $1\rm{k\Omega}$），传输门导通。

由于 T<sub>1</sub>、T<sub>2</sub> 管的结构形式是对称的，即漏极和源极可互易使用，因而 CMOS 传输门属于**双向器件**，它的输入端和输出端也可以互易使用。

利用 CMOS 传输门和 CMOS 反相器可以组合成各种复杂的逻辑电路，如**异或门**、**数据选择器**、**寄存器**、**计数器**等。

图 3.3.38 就是用反相器和传输门构成**异或门**的一个实例。由图可知

- 当$A=1$、$B=0$ 时，TG<sub>1</sub> 截止而 TG<sub>2</sub> 导通，$Y=B'=1$；
- 当$A=0$、$B=1$ 时，TG<sub>1</sub> 导通而 TG<sub>2</sub> 截止，$Y=B=1$；
- 当$A=B=0$ 时，TG<sub>1</sub> 导通而 TG<sub>2</sub> 截止，$Y=B=0$；
- 当$A=B=1$ 时，TG<sub>1</sub> 截止而 TG<sub>2</sub> 导通，$Y=B'=0$；

因此，$Y$ 与 $A$、$B$ 之间是**异或**逻辑关系，即 $Y=A\oplus B$

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.38_异或门.png"/><br>
</div>

传输门的另一个重要用途是作**模拟开关**，用来传输连续变化的模拟电压信号。这一点是无法用一般的逻辑门实现的。模拟开关的基本电路是由 CMOS 传输门和一个 CMOS 反相器组成的，如图 3.3.39 所示。和 CM0S 传输门一样，它也是双向器件。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.39_CMOS双向模拟开关.png"/><br>
</div>

假定接在输出端的电阻为 $R_{\rm{L}}$（如图 3.3.40 所示），双向模拟开关的导通内阻为 $R_{\rm{TG}}$。当 $C=0$（低电平）时开关截止，输出与输入之间的联系被切断，$v_{\rm{O}}=0$。

当 $C=1$（高电平）时，开关接通，输出电压为
$$v_{\rm{O}}=\frac{R_{\rm{L}}}{R_{\rm{L}}+R_{\rm{TG}}}v_{\rm{I}}  \tag{3.3.10}$$

我们将 $v_{\rm{O}}$ 与 $v_{\rm{I}}$ 的比值定义为电压传输系数 $K_{\rm{TG}}$，即
$$K_{\rm{TG}}=\frac{v_{\rm{O}}}{v_{\rm{I}}}=\frac{R_{\rm{L}}}{R_{\rm{L}}+R_{\rm{TG}}}v_{\rm{I}}  \tag{3.3.11}$$

为了得到尽量大而且稳定的电压传输系数，应使 $R_{\rm{L}}\gg R_{\rm{TG}}$ 而且希望 $R_{\rm{TG}}$ 不受输入电压变化的影响。然而式（3.3.1）表明，MOS 管的导通内阻 $R_{\rm{ON}}$ 是栅源电压 $v_{\rm{GS}}$ 的函数。从图 3.3.37 可见，T<sub>1</sub> 和 T<sub>2</sub> 的 $v_{\rm{GS}}$ 都是随 $v_{\rm{I}}$ 的变化而改变的，因而在不同 $v_{\rm{I}}$ 值下 T<sub>1</sub> 的导通内阻 $R_{\rm{ON1}}$、T<sub>2</sub> 的导通内阻 $R_{\rm{ON2}}$ 以及它们并联而成的 $R_{\rm{TG}}$ 皆非常数。

为了进一步减小 $R_{\rm{TG}}$ 的变化，又对图 3.3.37 所示的电路做了改进。目前某些精密 CMOS 模拟开关的导通电阻已经降低到了 $1\Omega$ 以内。例如 TI 公司生产的双通道模拟开关 TS3A24159，其导通电阻仅 $0.3\Omega$，而且可以在 1.65~3.6 V 的电源电压下工作。

#### 四、三态输出的 CMOS 门电路

三态输出门电路的输出除了有高、低电平这两个状态以外，还有第三个状态一**高阻态**。图 3.3.41（a）是三态输出反相器的电路结构图。因为这种电路结构总是接在集成电路的输出端，所以也将这种电路称为**输出缓冲器**（Output Buffer）。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.41_三态输出的CMOS反相器.png"/><br>
</div>

从这个电路图中可以看到，为了实现三态控制，除了原有的输人端 $A$ 以外，又增加了一个三态控制端 $EN'$。

- 当 $EN'=0$ 时，若 $A=1$，则 G<sub>4</sub>、G<sub>5</sub> 的输出同为高电平，T<sub>1</sub> 截止、T<sub>2</sub> 导通，$Y=0$；
- 若 $A=0$，则 G<sub>4</sub>、G<sub>5</sub> 的输出同为低电平，T<sub>1</sub> 导通、T<sub>2</sub> 截止，$Y=1$。因此，$Y=A'$，反相器处于正常工作状态。
- 而当 $EN'=1$ 时，不管 $A$ 的状态如何，G<sub>4</sub> 输出高电平而 G<sub>5</sub> 输出低电平，T<sub>1</sub> 和 T<sub>2</sub> 同时截止，输出呈现**高阻态**。

图 3.3.41（b）是**三态输出反相器**的逻辑符号。反相器符号内的三角形记号表示三态输出结构，$EN'$ 输入端处的小圆圈表示 $EN'$ 为低电平有效信号，即只有在 $EN'$ 为低电平时，电路方处于正常工作状态。如果 $EN'$ 为高电平有效，则没有这个小圆圈。这种三态输出结构有时也用于其他逻辑功能 CMOS 集成电路的输出瑞。

在一些比较复杂的数字系统（例如微型计算机）当中，为了减少各个单元之间的连线数目，希望能用同一条导线分时传递若干个门电路的输出信号。这时可采用图 3.3.42 所示的连接方式。图中的 G<sub>1</sub>、G<sub>2</sub>、...、G<sub>n</sub>。均为三态输出反相器，只要工作过程中控制各个反相器的 $EN$ 端轮流等于 1，而且任何时候仅有一个等于 1，就可以轮流地把各个反相器的输出信号送到公共的传输线一总线上，而互不干扰。这种连接方式称为**总线结构**。

利用三态输出结构的门电路还能实现数据的双向传输。图 3.3.43 是数据双向传输电路的结构图。当 $EN=1$ 时，G<sub>1</sub> 工作而 G<sub>2</sub> 为高阻态，数据 $D_0$ 经过 G<sub>1</sub> 反相后送到总线上去。当 $EN=0$ 时，G<sub>2</sub> 工作而 G<sub>1</sub> 为高阻态，来自总线的数据 $D_1$ 经过 G<sub>2</sub> 反相后送入电路内部。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图3.3.42_三态输出反相器.png"/><br>
</div>

