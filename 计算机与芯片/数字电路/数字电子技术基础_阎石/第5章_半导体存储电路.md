##### 内容提要

本章将系统介绍各种**半导体存储电路**的结构、工作原理和使用方法。首先介绍基本的存储单元，然后介绍由这些存储单元组成的**寄存器**和**随机存储器**，包括**静态随机存储器**和**动态随机存储器**。最后还将介绍各种**只读存储器**。

## 5.1 概述

在复杂的数字电路中，不仅需要对各种数字信号进行算术运算和逻辑运算，而且还需要在运算过程中不断地将运算数据和运算结果保存起来。因此，**存储电路**就成为计算机以及所有复杂数字系统不可缺少的组成部分。

**通常将只能存储一位数据的电路叫做存储单元**，将用于存储一组数据的存储电路叫做**寄存器**（Register），将用于存储大量数据的存储电路叫做**存储器**（Memory）。寄存器和半导体存储器中都包含了许多存储单元。

半导体存储电路中使用的存储单元可以分为**静态存储单元**和**动态存储单元**两大类。**静态存储单元由门电路连接而成**，其中包括各种电路结构形式的**锁存器**和**触发器**。只要不切断供电电源，静态存储单元的状态会一直保持下去。**动态存储单元则是利用电容的电荷存储效应来存储数据的**。由于电容的充放电需要一定的时间，因而它的工作速度低于静态存储单元。而且，电容上存储的电荷会随着时间的推移而逐渐泄漏，必须定期进行“刷新”（即将原来的数据重新写入），才能保证数据不会丢失。虽然如此，由于动态存储单元的电路结构十分简单，所以仍然被广泛用于大容量的存储器当中。

寄存器由一组触发器组成，每个触发器的输入和输出都有引出端，可以直接和周围电路连接，快速地进行数据交换。由 n 个触发器组成的寄存器可以存储一组位的二值数据。存储器的种类虽然很多，但它们的基本结构形式都是由存储矩阵和读/写控制电路两部分组成的。首先，根据工作方式的不同，可以将存储器分为**随机存储器**（Random Access Memory,简称 RAM）和**只读存储器**（Read-Only Memory，简称 ROM）两大类。随机存储器的工作特点是可以随时从其中快速地读出或写入数据。随机存储器又分成**静态随机存储器**（Static Random Access Memory，简称 SRAM）和**动态随机存储器**（Dynamic Random Access Memory，简称 DRAM），静态随机存储器中采用的是静态存储单元，而动态存储器中采用的则是动态存储单元。

只读存储器的工作方式与随机存储器不同，在正常的读/写工作状态下，只能从其中读出所存储的数据。因此，只读存储器一般都用来存储一些固定的数据。只读存储器中又有“**掩模 ROM**”（Mask Read-Only Memory）、“**可编程 ROM**”（Programmable Read-Only Memory，简称 **PROM**）和“**可擦除的可编程 ROM**”（Erasable Programmable Read-Only Memory，简称 **EPROM**）几种不同类型。掩模 ROM 中的数据在制作芯片时已经确定，无法更改。而 PROM 中的数据可以由用户根据自己的需要写入，但一经写入以后就不能再修改了。EPROM 中的数据则不但可以由用户自己写入，而且还能擦除重写，所以具有更大的使用灵活性。早期的 EPROM 曾经采用紫外线照射的方法进行擦除，但不仅擦除操作非常费时，而且器件的成本也比较高，所以现在已经完全被使用**电信号擦除的 EPROM**（Electrically Erasable Programmable Read-Only Memory，简称 **EEPROM**）所取代。目前在 U 盘和各种便携式移动设备中广泛使用的“**闪存**”（Flash Memory）就是一种 EEPROM。虽然 EPROM 中的数据可以擦除改写，但由于擦除改写的速度相对读出的速度慢得多，所以通常仍然将它用作只读存储器。

## 5.2 SR 锁存器

**SR 锁存器**（Set-Reset Latch）是静态存储单元当中最基本、也是电路结构最简单的一种。通常它由两个**或非门**或者**与非门**组成。图 5.2.1（a）中给出了用两个**或非门**组成的 SR 锁存器的电路。

第三章里讲过的各种门电路虽然都有两种不同的输出状态（高、低电平，亦即 1、0），但都不能自行保持。例如在图 5.2.1（a）所示的电路中，如果只有一个或非门 G<sub>1</sub>，那么当另一个输入端接低电平时，输出 $v_{\rm{O1}}$ 的高、低电平将随输入 $v_{\rm{I1}}$ 的高、低电平而改变。因此，它不具备记忆功能。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.2.1_用或非门组成的锁存器.png"/><br>
</div>

如果用另一个或非门 G<sub>2</sub> 将 $v_{\rm{O1}}$ 反相（同时将 G<sub>2</sub> 的另一个输入端接低电平），则 G<sub>2</sub> 的输出 $v_{\rm{O2}}$ 将与 $v_{\rm{I1}}$ 同相。现将 $v_{\rm{O2}}$ 接回 G<sub>1</sub> 的另一个输入端，这时即使原来加在 $v_{\rm{I1}}$ 输入端上的信号消失了，$v_{\rm{O1}}$ 和 $v_{\rm{O2}}$ 的状态也能保持下去。这样就得到了图 5.2.1（a）中由两个或非门所组成的 SR 锁存器电路。

由于 G<sub>1</sub> 和 G<sub>2</sub> 在电路中的作用完全相同，所以习惯上将电路画成图 5.2.1（b）所示的对称形式。$Q$ 和 $Q'$ 称为输出端，并且定义 $Q=1$、$Q'=0$ 为锁存器的 1 状态，$Q=0$、$Q'=1$ 为锁存器的 0 状态。$S_{\rm{D}}$ 称为**置位端**或置 1 输入端，$R_{\rm{D}}$ 称为**复位端**或置 0 输入端。根据正逻辑约定（高电平表示逻辑 1 状态，低电平表示逻辑 0 状态）可知：

- 当 $S_{\rm{D}}=1$、 $R_{\rm{D}}=0$ 时，$Q=1$、$Q'=0$。在 $S_{\rm{D}}=1$ 信号消失以后（即 $S_{\rm{D}}$ 回到 0），由于有 $Q$ 端的高电平接回到 G<sub>2</sub> 的另一个输入端，因而电路的 1 状态得以保持。
- 当 $S_{\rm{D}}=0$、 $R_{\rm{D}}=1$ 时，$Q=0$、$Q'=1$。在 $R_{\rm{D}}=1$ 信号消失以后，电路保持 0 状态保持不变。
- 当 $S_{\rm{D}}=R_{\rm{D}}=0$ 时，电路维持原来的状态不变。
- 当 $S_{\rm{D}}=R_{\rm{D}}=1$ 时，$Q=Q'=0$，这既不是定义的 1 状态，也不是定义的 0 状态。而且，在 $S_{\rm{D}}$ 和 $R_{\rm{D}}$ 同时回到 0 以后无法断定锁存器将回到 1 状态还是 0 状态。因此，在正常工作时输入信号应遵守 $S_{\rm{D}}R_{\rm{D}}=0$ 的约束条件，亦即不允许输入 $S_{\rm{D}}=R_{\rm{D}}=1$ 的信号。

将上述逻辑关系列成真值表，就得到表 5.2.1。因为锁存器新的状态 $Q^*$（也称为**次态**）不仅与输人状态有关，而且与锁存器原来的状态 $Q$（也称为初态）有关，所以将 $Q$ 也作为一个变量列人了真值表，并将 $Q$ 称为**状态变量**，将这种含有状态变量的真值表称为锁存器的**特性表**（或**功能表**）。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.2.1_SR锁存器.png"/><br>
</div>

SR 锁存器也可以用**与非门**构成，如图 5.2.2 所示。这个电路是以低电平作为输入信号的，所以用 $S_{\rm{D}}'$ 和 $R_{\rm{D}}'$ 分别表示置 1 输入端和置 0 输人端。在图 5.2.2（b）所示的图形符号上，**用输入端的小圆圈表示用低电平作输入信号，或者称低电平有效**。表 5.2.2 是它的特性表。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.2.2_用与非门组成的SR锁存器.png"/><br>
</div>

由于 $S_{\rm{D}}'=R_{\rm{D}}'=0$ 时出现非定义的 $Q=Q'=1$ 状态，而且当 $S_{\rm{D}}'$ 和 $R_{\rm{D}}'$ 同时回到高电平以后锁存器的状态难以确定，所以在正常工作时同样应当遵守 $S_{\rm{D}}R_{\rm{D}}=0$ 的约束条件，即不应加以 $S_{\rm{D}}'=R_{\rm{D}}'=0$ 的输人信号。

由图 5.2.1（b）和图 5.2.2（a）中可见，在 SR 锁存器中，输入信号直接加在输出门上，所以输入信号在全部作用时间里(即 $S_{\rm{D}}'$ 或 $R_{\rm{D}}'$ 为 1 的全部时间)，都能直接改变输出端 $Q$ 和 $Q'$ 的状态。正是由于这个缘故，也将 $S_{\rm{D}}$（$S_{\rm{D}}'$）称为**直接置位端**，将 $R_{\rm{D}}$（$R_{\rm{D}}'$）称为**直接复位端**，并且将这个电路称为**直接置位、复位锁存器**(Set-Reset Latch)。

## 5.3 触发器

触发器与锁存器的不同在于，它除了置 1、置 0 输入端以外，又增加了一个**触发信号输入端**。只有当触发信号到来时，触发器才能按照输入的置 1、置 0 信号置成相应的状态，并保持下去。我们将这个触发信号称为**时钟信号**（CLOCK），记作 $CLK$。当系统中有多个触发器需要同时动作时，就可以用同一个时钟信号作为同步控制信号了。

触发信号的工作方式可以分为电平触发、边沿触发和脉冲触发三种。下面将会看到，在不同的触发方式下，触发器的动作过程各具有不同的动作特点。掌握这些动作特点，对于正确使用触发器是十分必要的。

### 5.3.1 电平触发的触发器

#### 一、电路结构和工作原理

图 5.3.1（a）是电平触发 SR 触发器基本的电路结构形式。这个电路由两部分组成：由**与非门** G<sub>1</sub>、G<sub>2</sub> 组成的 SR 锁存器和由**与非门** G<sub>3</sub>、G<sub>4</sub> 组成的输入控制电路。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.1_电平触发SR触发器.png"/><br>
</div>

由图可知，当 $CLK=0$ 时，门 G<sub>3</sub>、G<sub>4</sub> 的输出始终停留在 1 状态，$S$、$R$ 端的信号无法通过 G<sub>3</sub>、G<sub>4</sub> 而影响输出状态，故输出保持原来的状态不变。只有当触发信号 $CLK$ 变成高电平以后，$S$、$R$ 信号才能通过门 G<sub>3</sub>、G<sub>4</sub> 加到由门 G<sub>1</sub>、G<sub>2</sub> 组成的锁存器上，“触发”电路发生变化，使 $Q$ 和 $Q'$ 根据 $S$、$R$ 信号而改变状态。因此，将 $CLK$ 的这种控制方式称为**电平触发方式**。

在图 5.3.1（b）所示的图形符号中，用框内的 C1 表示 $CLK$ 是编号为 1 的一个控制信号。1S 和 1R 表示受 C1 控制的两个输入信号，只有在 C1 为有效电平时（C1=1），1S 和 1R 信号才能起作用。框图外部的输入端处没有小圆圈表示 $CLK$ 以高电平为有效信号。（如果在 $CLK$ 输入端画有小圆圈，则表示 $CLK$ 以低电平作为有效信号。）

图 5.3.1（a）电路的特性表如表 5.3.1 所示。从表中可见，只有当 $CLK=1$ 时，触发器输出端的状态才受输人信号的控制，而且在 $CLK=1$ 时这个特性表与 SR 锁存器的特性表是一样的。同时，电平触发 SR 触发器的输人信号同样应当遵守 $SR=0$ 的约束条件。否则当 $S$、$R$ 同时由 1 变为 0,或者 $S=R=1$ 时 $CLK$ 回到 0，触发器的次态将无法确知。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.1_电平触发SR触发器的特性表.png"/><br>
</div>

在某些应用场合，有时需要在 $CLK$ 的有效电平到达之前预先将触发器置成指定的状态，为此，在实用的电路上往往还设置有异步置 1 输入端 $S_{\rm{D}}'$ 和异步置 0 输人端 $R_{\rm{D}}'$，如图 5.3.2 所示。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.2_带异步置位、复位端的电平触发SR触发器.png"/><br>
</div>

只要在 $S_{\rm{D}}'$ 或 $R_{\rm{D}}'$ 加入低电平，即可立即将触发器置 1 或置 0，而不受时钟信号的控制。因此，将 $S_{\rm{D}}'$ 称为**异步置位（置 1）端**，将 $R_{\rm{D}}'$ 称为**异步复位（置 0）端**。触发器在时钟信号控制下正常工作时应使 $S_{\rm{D}}'$ 和 $R_{\rm{D}}'$ 处于高电平。

此外，在图 5.3.2 所示电路的具体情况下，用 $S_{\rm{D}}'$ 或 $R_{\rm{D}}'$。将触发器置位或复位应当在 $CLK=0$ 的状态下进行，否则在 $S_{\rm{D}}'$ 或 $R_{\rm{D}}'$ 返回高电平以后预置的状态不一定能保存下来。

##### 二、电平触发方式的动作特点

1. 只有当 $CLK$ 变为有效电平时，触发器才能接受输入信号，并按照输入信号将触发器的输出置成相应的状态。
2. 在 $CLK=1$ 的全部时间里，$S$ 和 $R$ 状态的变化都可能引起输出状态的改变。在 $CLK$ 回到 0 以后，触发器保存的是 $CLK$ 回到 0 以前瞬间的状态。

根据上述的动作特点可以想象到，如果在 $CLK=1$ 期间 $S$、$R$ 的状态多次发生变化，那么触发器输出的状态也将发生多次翻转，这就降低了触发器的抗干扰能力。

为了能适应**单端输入信号**的需要，在一些集成电路产品中把图 5.3.1（a）所示的电路改接成图 5.3.4 的形式，得到**电平触发的 D 触发器**。（有些书刊和资料中也将这个电路称为 **D 型锁存器**。）

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.4_D锁存器.png"/><br>
</div>

由图可见，若 $D=1$，则 $CLK$ 变为高电平以后触发器被置成 $Q=1$，$CLK$ 回到低电平以后触发器保持 1 状态不变。若 $D=0$，则 $CLK$ 变为高电平以后触发器被置成 $Q=0$，$CLK$ 回到低电平以后触发器保持 0 状态不变。因为它仍然工作在电平触发方式下，所以同样具有电平触发的动作特点。它的特性表如表 5.3.2 所示。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.2_D锁存器的特性表.png"/><br>
</div>

在 CMOS 电路中，经常利用 CMOS 传输门组成电平触发 D 触发器，如图 5.3.5 所示。当 $CLK=1$ 时，传输门 TG<sub>1</sub> 导通、TG<sub>2</sub> 截止，$Q=D$。而且，在 $CLK=1$ 的全部时间里 $Q$ 端的状态始终跟随 $D$ 端的状态而改变。在 $CLK$ 回到 0 以后，TG<sub>2</sub> 导通、TG<sub>1</sub> 截止。由于反相器 G<sub>1</sub> 输人电容的存储效应，短时间内 G<sub>1</sub> 输入端仍然保持为 TG<sub>1</sub> 截止以前瞬间的状态，而且这时反相器 G<sub>1</sub>、G<sub>2</sub> 和传输门 TG<sub>2</sub> 形成了**状态自锁的闭合回路**，所以 $Q$ 和 $Q'$ 的状态被保存下来。它的特性表与表 5.3.2 相同。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.5_利用CMOS传输门组成的电平触发.png"/><br>
</div>

因为在 $CLK$ 的有效电平期间输出状态始终跟随输入状态变化，输出与输入的状态保持相同，所以又将这个电路称为“**透明的 D 型锁存器**”（Transparent D-Latch）。

### 5.3.2 边沿触发的触发器

#### 一、电路结构和工作原理

为了提高触发器的可靠性，增强抗干扰能力，希望触发器的次态仅仅取决于 $CLK$ 信号下降沿（或上升沿）到达时刻输入信号的状态。而在此之前和之后输入状态的变化对触发器的次态没有影响。为实现这一设想，人们相继研制成了各种**边沿触发**（edge-triggered）的触发器电路。目前已用于数字集成电路产品中的边沿触发器电路有用**两个电平触发 D 触发器**构成的**边沿触发器**、维持阻塞触发器**维持阻塞触发器**、**利用门电路传输延迟时间的边沿触发器**等几种较为常见的电路结构形式。

图 5.3.7（a）是用两个电平触发 D 触发器组成边沿触发 D 触发器的原理性框图，图中的 FF<sub>1</sub> 和 FF<sub>2</sub>，是**两个电平触发的 D 触发器**（也称为 D 型锁存器）。由图可见，当 $CLK$ 处于低电平时，$CLK_1$ 为高电平，因而 FF<sub>1</sub> 的输出 $Q_1$ 跟随输人端 $D$ 的状态变化，始终保持 $Q_1=D$。与此同时，$CLK_2$ 为低电平，FF<sub>2</sub> 的输出 $Q_2$（也就是整个电路最后的输出 $Q$）保持原来的状态不变。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.7_用两个电平触发D触发器组成的边沿触发器.png"/><br>
</div>

当 $CLK$ 由低电平跳变至高电平时，$CLK_1$ 随之变成了低电平，于是 $Q_1$ 保持为 $CLK$ 上升沿到达前瞬间输人端 $D$ 的状态，此后不再跟随 $D$ 的状态而改变。与此同时，$CLK_2$ 跳变为高电平，使 $Q_2$ 与它的输入状态相同。由于 FF<sub>2</sub> 的输入就是 FF<sub>1</sub> 的输出 $Q_1$，所以输出端 $Q$ 便被置成了与 $CLK$ 上升沿到达前瞬时 $D$ 端相同的状态，而与以前和以后 $D$ 端的状态无关。

目前在 CMOS 集成电路中主要采用这种电路结构形式制作**边沿触发器**。图 5.3.7（b）就是 CMOS 边沿触发 $D$ 触发器的典型电路，其中 FF<sub>1</sub> 和 FF<sub>2</sub> 是两个利用 CMOS 传输门组成的电平触发 D 触发器。当 $CLK=0$ 时，$C=0$、$C'=1$，TG<sub>1</sub> 导通、TG<sub>2</sub> 截止，$D$ 端的输入信号送入 FF<sub>1</sub> 使 $Q_1=D$。而且，在 $CLK=0$ 期间 $Q_1$ 的状态将一直跟随 $D$ 的状态而变化。同时，由于 TG<sub>3</sub> 截止、TG<sub>4</sub> 导通，FF<sub>2</sub> 保持原来的状态不变。

当 $CLK$ 的上升沿到达时，$C=1$、$C'=0$，TG<sub>1</sub> 变为截止、TG<sub>2</sub> 变为导通。由于反相器 G<sub>1</sub> 输入电容的存储效应，G<sub>1</sub> 输人端的电压不会立刻改变，于是 Q<sub>1</sub> 在 TG<sub>1</sub> 变为截止前的状态被保存了下来。同时，随着 TG<sub>4</sub> 变为截止、TG<sub>3</sub> 变为导通，Q<sub>1</sub> 的状态通过 TG<sub>3</sub> 和 G<sub>3</sub>、G<sub>4</sub> 送到了输出端，使 $Q^*=D$（$CLK$ 上升沿到达时 $D$ 的状态）。因此，这是一个**上升沿触发的 D 触发器**。

在图形符号中，用 $CLK$ 输入端处框内的“$>$”表示触发器为边沿触发方式。在特性表中，则用 $CLK$ 一栏里的“$\uparrow$”表示边沿触发方式，而且是**上升沿触发**，如表 5.3.3 中所示。（如果将图 5.3.7（a）中 $CLK$ 输人端的一个反相器去掉，则变成下降沿触发，这时应在 $CLK$ 输人端加画小圆圈，并在特性表中以“$\downarrow $”表示。）

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.3_边沿触发器的特性表.png"/><br>
</div>

为了实现**异步置位、复位功能**，需要引入 $S_{\rm{D}}$ 和 $R_{\rm{D}}$ 信号。因为 $S_{\rm{D}}$ 和 $R_{\rm{D}}$ 是以高电平作为置 1 和置 0 输入信号的，所以必须把图 5.3.7（b）中的 4 个反相器改成**或非门**，形成图 5.3.8 所示的电路。$S_{\rm{D}}$ 和 $R_{\rm{D}}$ 端的内部连线在图中以**虚线**示出。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.8_带有异步置位复位端的CMOS边沿触发D触发器.png"/><br>
</div>

#### 二、边沿触发方式的动作特点

通过对上述边沿触发器工作过程的分析可以看出，边沿触发方式的动作特点，这就是触发器的次态仅取决于时钟信号的上升沿（也称为正边沿）或下降沿（也称为负边沿）到达时输入的逻辑状态，而在这以前或以后，输入信号的变化对触发器输出的状态没有影响。

这一特点有效地提高了触发器的抗干扰能力，因而也提高了电路的工作可靠性。

### 5.3.3 脉冲触发的触发器

#### 一、电路结构和工作原理

如果将图 5.3.7（a）中边沿触发器里的两个电平触发 D 触发器换成电平触发的 SR 触发器，如图 5.3.10（a）所示，那么这个新组成的电路又有怎样的动作特点呢？下面我们就来讨论一下它的触发过程。

<div align=center>
<img width=70% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.10_脉冲触发的SR触发器.png"/><br>
</div>

图 5.3.10（a）的电路是**脉冲触发 SR 触发器**的典型电路（以前也把这个电路称作**主从 SR 触发器**）。FF<sub>1</sub> 和 FF<sub>2</sub> 分别称为主触发器和从触发器。当 $CLK=0$ 时，FF<sub>1</sub> 保持原状态不变。在 $CLK$ 变为高电平后，$CLK=1$、$CLK'=0$，主触发器的输出 Q<sub>1</sub> 将按照 $S$ 和 $R$ 输入端信号被置成相应的状态，而从触发器保持原来的状态不变。当 $CLK$ 回到低电平，亦即下降沿到来时，从触发器的输出 Q<sub>2</sub> 被置成与此刻 Q<sub>1</sub> 相同的状态，而主触发器开始保持状态不变。由此可见，在一个时钟周期里，输出端的状态只可能改变一次，而且发生在 $CLK$ 的下降沿。这一点和边沿触发器类似。

但需要注意的是，现在输入端的主触发器 FF<sub>1</sub> 是一个电平触发的 SR 触发器，而不是电平触发的 D 触发器了。由于在 $CLK$ 高电平期间主触发器输出的状态可能随 $S$ 和 $R$ 状态的变化而发生多次翻转，输出端的状态不可能始终与输入状态保持一致。因此，在脉冲触发 SR 触发器中，不能像边沿触发器那样，仅仅根据 $CLK$ 下降沿到来时刻输入端 $S$ 和 $R$ 状态确定输出端 $Q$ 的状态，而必须考察全部 $CLK=1$ 期间主触发器状态的变化情况。这一点就是**脉冲触发方式和边沿触发方式的区别**所在。

例如，在图 5.3.10（a）的电路中，当 $CLK=1$ 期间输入信号先是 $S=0$、$R=1$，主触发器被置成 $Q_1=0$；随后又变为 $S=1$、$R=0$，于是主触发器被置成了 $Q_1=1$。而在 $CLK$ 下降沿到来之前输入又变成了 $S=0$、$R=0$，这时主触发器将保持 $Q_1=1$ 不变。这样在 $CLK$ 下降沿到来时，输出便被置成 $Q=Q_2=1$。显然，如果只根据 $CLK$ 下降沿到来时的输入状态，是无法正确地确定输出状态的。

在 $CLK$ 高电平期间输入 $S$、$R$ 不变的情况下，可以列出脉冲触发 SR 触发器的特性表，如表 5.3.4。表中用 $CLK$ 一行里的符号表示脉冲触发方式，而且 $CLK$ 以高电平为有效电平(即 $CLK$ 高电平时接受输入信号)，输出端状态的变化则发生在 $CLK$ 下降沿。这种情况也称为**正脉冲触发**。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.4_脉冲触发SR触发器的特性表.png"/><br>
</div>

在图 5.3.10（b）的图形符号中，用框内的符号表示**脉冲触发方式**。因为需要等到 $CLK$ 的有效电平消失以后（即回到低电平），输出状态才改变，所以也把这种触发方式叫做**延迟触发**。

如果在图 5.3.10（a）电路 $CLK$ 输入端增加一个反相器，则电路将变为 $CLK$ 以低电平为有效信号，这时输出状态的变化将发生在 $CLK$ 的上升沿。同时，在图形符号中 $CLK$ 输入端处增画一个小圆圈。

由于主触发器是一个电平触发 SR 触发器，所以在 $CLK$ 的有效电平期间不应当施加 $S=R=1$ 的输人信号，即仍需遵守 $SR=0$ 的约束条件。前已述及，之所以规定这个约束条件，是因为当 $CLK$ 的有效电平消失以后，或者 $S$、$R$ 端的高电平同时回到低电平时，不能确定触发器的次态。为了解除这一约束，如果我们规定当输入为 $S=R=1$ 时，触发器的次态为初态的反状态，即$ Q^\*=Q'$，这样触发器的次态也能确定了。

不难想到，在 SR 触发器的基础上，如果当 $S=R=1$ 时，将 $Q$ 和 $Q'$ 接回到输入端，用 $Q'$ 代替 $S$ 端的输入信号，用 $Q$ 代替 $R$ 端的输入信号，就可以实现上述要求了。图 5.3.12（a）就是根据这个原理，在一个正脉冲触发 SR 触发器的基础上改接而成的。为了强调这个电路在逻辑功能上与 SR 触发器的区别，将两个输入端分别用 $J$ 和 $K$ 标示，并将具有这种逻辑功能的触发器称为 $JK 触发器$。图 5.3.12（b）是正脉冲触发 JK 触发器的图形逻辑符号。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.12_正脉冲触发的JK触发器.png"/><br>
</div>

下面就来具体分析一下图 5.3.12（a）电路在各种输入状态下的触发过程。

- 若 $J=1$、$K=0$,则 $CLK=1$ 时主触发器 FF<sub>1</sub> 置 1（原来是 0 则置成 1，原来是 1 则保持 1），待 $CLK=0$ 以后从触发器 FF<sub>2</sub> 亦随之置 1，即 $Q^*=1$。[原来是 1 则实际输出相当于 00]
- 若 $J=0$、$K=1$，则 $CLK=1$ 时主触发器置 0，待 $CLK=0$ 以后从触发器也随之置 0，即 $Q^*=0$。
- 若 $J=K=0$，则由于门 G<sub>1</sub>、G<sub>2</sub> 被封锁，触发器保持原状态不变，即 $Q^*=Q$。
- 若 $J=K=1$ 时，需要分别考虑两种情况。
  - 第一种情况是 $Q=0$。这时门 G<sub>2</sub> 被 $Q$ 端的低电平封锁，$CLK=1$ 时仅 G<sub>1</sub> 输出低电平信号，故主触发器置 1。$CLK=0$ 以后从触发器也跟着置 1，即 $Q^*=1$。
  - 第二种情况是 $Q=1$。这时门 G<sub>1</sub> 被 $Q'$ 端的低电平封锁，因而在 $CLK=1$ 时仅 G<sub>2</sub> 能给出低电平信号，故主触发器被置 0。当 $CLK=0$ 以后从触发器跟着置 0，故 $Q^*=0$。
  - 综合以上两种情况可知，无论 $Q=1$ 还是 $Q=0$，当 $J=K=1$ 时，触发器的次态可统一表示为 $Q^*=Q'$。就是说，当 $J=K=1$ 时，$CLK$ 下降沿到达后触发器将翻转为与初态相反的状态。

将上述的逻辑关系用真值表表示，即得到表 5.3.5 所示的脉冲触发 JK 触发器的特性表。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.5_脉冲触发JK触发器的特性表.png"/><br>
</div>

在有些集成电路触发器产品中，输入端 $J$ 和 $K$ 不止是一个。在这种情况下，$J_1$ 和 $J_2$、$K_1$ 和 $K_2$ 是与的逻辑关系，如图 5.3.13（a）所示。如果用特性表描述它的逻辑功能，则应以 $J_1\cdot J_2$ 和 $K_1\cdot K_2$ 分别代替表 5.3.5 中的 $J$ 和 $K$。图 5.3.13（b）中给出了多输人端 JK 触发器常见的两种逻辑符号。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.13_具有多输入端的主从JK触发器.png"/><br>
</div>

#### 二、脉冲触发方式的动作特点

通过上面的分析可以看到，脉冲触发方式具有两个值得注意的动作特点：

1. 触发器的翻转分两步动作。
   - 第一步，当 $CLK$ 以高电平为有效信号时，在 $CLK=1$ 器件主触发器接收输入端（$S$、$R$ 或 $J$、$K$）的信号，被置成相应的转态，而从触发器不动；
   - 第二步，$CLK$ 下降沿到来时从触发器按照主触发器的状态翻转，所以 $Q$、$Q'$ 端状态的改变发生在 $CLK$ 的下降沿。（若 $CLK$ 以低电平为有效信号，则 $Q$ 和 $Q'$ 状态的变化发生在 $CLK$ 的上升沿。）
2. 因为主触发器本身是一个电平触发 SR 触发器，所以在 $CLK=1$ 的全部时间里输入信号都将对主触发器起控制作用。

由于存在这样两个动作特点，在 $CLK=1$ 期间输入信号发生过变化以后，$CLK$ 下降沿到达时从触发器的状态不一定能按此刻输入信号的状态来确定，而必须考虑整个 $CLK=1$ 期间里输入信号的变化过程才能确定触发器的次态。

在图 5.3.12 所示的脉冲触发 JK 触发器中也存在类似的问题，即 $CLK=1$ 的全部时间里主触发器都可以接收输入信号。不过由于 $Q$、$Q'$ 端接回到了输入门上，所以在 $Q=0$ 时主触发器只能接受置 1 输入信号，在 $Q=1$ 时主触发器只能接受置 0 信号。其结果就是在 $CLK=1$ 期间主触发器只有可能翻转一次，一旦翻转了就不会翻回原来的状态。但在 SR 触发器中，由于没有 $Q$、$Q'$ 端接到输入端的反馈线，所以 $CLK=1$ 期间 $S$、$R$ 状态多次改变时主触发器状态也会随着多次翻转。

因此，在使用脉冲触发的触发器时必须注意：只有在 $CLK=1$ 的全部时间里输入状态始终未变的条件下，用 $CLK$ 下降沿到达时输入的状态决定触发器的次态才肯定是对的。否则，必须考虑 $CLK=1$ 期间输入状态的全部变化过程，才能确定 $CLK$ 下降沿到达时触发器的次态。

### 5.3.4 触发器按逻辑功能的分类

从上一节中可以看到，由于每一种触发器电路的信号输入方式不同（有**单端输入**的，也有**双端输入**的），触发器的次态与输人信号逻辑状态间的关系也不相同，所以它们的逻辑功能也不完全一样。

按照逻辑功能的不同特点，通常将时钟控制的触发器分为 **SR 触发器**、**JK 触发器**、**T 触发器**和 **D 触发器**等几种类型。

#### ー、SR 触发器

凡在时钟信号作用下逻辑功能符合表 5.3.6 特性表所规定的逻辑功能者，无论触发方式如何，均称为 **SR 触发器**。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.6_SR触发器的特性表.png"/><br>
</div>

显然，上几节中讲到的图 5.3.1 和图 5.3.10 电路都属于 SR 触发器。而图 5.2.1 和图 5.2.2 所示的锁存器电路不受触发信号（时钟）控制，所以它们不属于这里所定义的 SR 触发器。

如果把表 5.3.6 特性表所规定的逻辑关系写成逻辑函数式，则得到
$$\begin{align} &Q^*=S'R'Q+SR'Q'+SR'Q=SR'+S'R'Q\\\ &SR=0\ \text{（约束条件）} \end{align}$$
利用约束条件将上式化简，于是得出
$$\begin{align} &Q^*=S+R'Q\\\ &SR=0\ \text{（约束条件）} \end{align}  \tag{5.3.1}$$
式（5.3.1）称为 SR 触发器的特性方程。

虽然用特性表描述触发器的逻辑功能比较直观，但是不能用特性表进行逻辑运算。在下一章里将会看到，在进行时序逻辑电路的分析和设计时，就必须使用特性方程描述触发器的逻辑功能了。

#### 二、JK 触发器

凡在时钟信号作用下逻辑功能复合表 5.3.7 特性表所规定的逻辑功能者，无论其触发方式如何，均成为 JK 触发器。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.7_JK触发器的特性表.png"/><br>
</div>

前面讲过的图 5.3.12 和图 5.3.13 所示电路都属于 JK 触发器。

根据表 5.3.7 可以写出 JK 触发器的特性方程，化简后得到
$$Q^*=JQ'+K'Q  \tag{5.3.2}$$

#### 三、T 触发器

在某些应用场合下，需要这样一种逻辑功能的触发器，当控制信号 $T=1$ 时每来一个时钟信号它的状态就翻转一次；而当 $T=0$ 时，时钟信号到达后它的状态保持不变。具备这种逻辑功能的触发器称为 **T 触发器**。它的特性表如表 5.3.8 所示。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.8_T触发器的特性表.png"/><br>
</div>

从特性表写出 T 触发器的特性方程为
$$Q^*=TQ'+T'Q  \tag{5.3.3}$$
它的图形逻辑符号如图 5.3.16 所示。

<div align=center>
<img width=20% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.16_T触发器的图形逻辑符号.png"/><br>
</div>

**事实上只要将 JK 触发器的两个输入端连在一起作为 T 端，就可以构成 T 触发器**。正因为如此，在触发器的定型产品中通常没有专门的 T 触发器。

当 T 触发器的控制端接至固定的高电平时（即 $T$ 恒等于 1），则式（5.3.3）变为
$$Q^*=Q'$$
即每次 $CLK$ 信号作用后触发器必然翻转成与初态相反的状态。

#### 四、D 触发器

凡在时钟信号作用下逻辑功能符合表 5.3.9 特性表所规定的逻辑功能者，无论触发方式如何，均称为 **D 触发器**。前面讲过的图 5.3.4、图 5.3.5 和图 5.3.7 中的触发器，在逻辑功能上同属于这种类型。

从特性表写出 D 触发器的特性方程为
$$Q^*=D  \tag{5.3.4}$$

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.3.9_D触发器的特性表.png"/><br>
</div>

将 JK、SR、T 三种类型触发器的特性表比较一下不难看出，其中 JK 触发器的逻辑功能最强，它包含了 SR 触发器和 T 触发器的所有逻辑功能。因此，**在需要使用 SR 触发器和 T 触发器的场合完全可以用 JK 触发器来取代**。例如，在需要 SR 触发器时，只要将 JK 触发器的 J、K 端当作 S、R 端使用，就可以实现 SR 触发器的功能：在需要 T 触发器时，只要将 J、K 连在一起当作 T 端使用，就可以实现 T 触发器的功能，如图 5.3.17 所示。因此，目前生产的触发器定型产品中只有 JK 触发器和 D 触发器这两大类。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.17_将JK触发器用作SR或T触发器.png"/><br>
</div>

**逻辑功能**和**触发方式**是触发器的两个最重要的特性。逻辑功能是指稳态下触发器的次态和初态与输人之间的逻辑关系，而触发方式则指出了触发器在动态翻转过程中的动作特点。

通过前面的介绍可以看到，触发器的触发方式是由电路结构形式决定的。因此，触发器的触发方式和电路结构形式之间有固定的对应关系。然而触发器的触发方式和逻辑功能之间并无固定的对应关系。也就是说，同一种逻辑功能的触发器可以采用不同的触发方式；同一种触发方式的触发器可以具有不同逻辑功能。

例如图 5.3.4（a）中的电路和图 5.3.7（a）中的电路都是 D 触发器，但是两者的触发方式不同，前者属于电平触发，而后者属于边沿触发，所以在触发过程中它们的动作特点是不一样的。

又例如。同样是边沿触发器，不仅可以作成图 5.3.7 中的 D 触发器，也可以作成如图 5.3.18 中所示的 **JK 触发器**。将这个电路与图 5.3.8 所示的 D 触发器电路对照一下即可发现，图 5.3.18 电路只不过是在图 5.3.8 电路上附加了门 G<sub>1</sub>、G<sub>2</sub> 和 G<sub>3</sub> 而已，电路的其余部分完全相同。从逻辑图可以写出图 5.3.18 所示触发器的特性方程
$$Q^*=D=((J+Q)'+KQ)'=JQ'+K'Q$$
故符合 JK 触发器规定的逻辑功能。

<div align=center>
<img width=70% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.18_边沿触发JK触发器.png"/><br>
</div>

### 5.3.5 触发器的动态特性

为了保证触发器在时钟信号到来时能可靠地翻转，有必要进一步分析一下触发器的**动态翻转过程**，从而找出对**输入信号**、**时钟信号**以及两者互相配合关系的要求。通常用**建立时间**、**保持时间**、**传输延迟时间**以及**最高时钟频率**等几个参数具体描述触发器的动态特性。

下面就以图 5.3.19（a）中的边沿触发 D 触发器为例，说明这些动态参数的含义。为了叙述的方便，假定图中传输门从控制信号（$C$ 和 $C'$）跳变到它的输出状态改变的延迟时间、反相器的传输延迟时间都是 $t_{\rm{d}}$。

#### 一、建立时间（Setup time）

**建立时间是指输入信号应当先于时钟信号 CLK 动作沿到达的时间**。为了保证触发器可靠地地翻转，在 $C$ 和 $C'$ 状态改变以前 FF<sub>1</sub> 中 Q<sub>1</sub> 的状态必须稳定地建立起来，使 $Q=D$。由于加到 $D$ 端的输入信号需要经过传输门 TG<sub>1</sub> 和反相器 G<sub>1</sub> 和 G<sub>2</sub> 的传输延迟时间才能到达 Q<sub>1</sub> 端，而在 $CLK$ 的上升沿到达后，只需经过反相器 G<sub>5</sub> 的传输延迟时间 $C'$ 的状态即开始改变，因此 $D$ 端的输入信号必须先于 $CLK$ 的上升沿至少 $2t_{\rm{d}}$ 的时间到达，故 $t_{\rm{su}}=2t_{\rm{d}}$。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.3.19_边沿触发D触发器动态特性的分析.png"/><br>
</div>

##### 二、保持时间（Hold time）

**保持时间是指时钟信号 CLK 动作沿到达后，输入信号仍然需要保持不变的时间**。由图 5.3.19（a）可见，在 $C$ 和 $C'$ 改变状态使 TG<sub>1</sub> 变为截止、TG<sub>2</sub> 变为导通之前，$D$ 端的输入信号应当保持不变。为此，至少在 $CLK$ 上升沿到达后 $2t_{\rm{d}}$ 的时间内输人信号应当保持不变，即保持时间应为 $t_{\rm{h}}=2t_{\rm{d}}$。

##### 三、传输延迟时间（Propagation delay time）

传输延迟时间是指从 CLK 动作沿到达开始，直到触发器输出的新状态稳定建立所需要的时间。从图 5.3.19（a）可见，FF<sub>2</sub> 输出端 Q 的新状态需要经过 $C$、$C'$、TG<sub>3</sub> 和 G<sub>3</sub> 的传输延迟以后才能建立起来，所以输出端 Q 的传输延迟时间 $t_{\rm{pdQ}}=4t_{\rm{d}}$。而 $Q'$ 端还要再经过 G<sub>4</sub> 的延迟才能建立起来，因而输出端 $Q$ 的传输延迟时间应为 $t_{\rm{pdQ'}}=5t_{\rm{d}}$。

##### 四、最高时钟频率（Maximum clock frequency）

**最高时钟频率**是指触发器在连续、重复翻转的情况下，时钟信号可以达到的最高重复频率。从上面的分析得知，在图 5.3.19（a）的电路中，为了保证触发器能可靠地翻转，$CLK$ 的低电平持续时间 $t_{\rm{wl}}$ 必须大于建立时间，所以 $t_{\rm{wl}}$ 的最小值应为 $t_{\rm{wl(min)}}=2t_{\rm{d}}$。

而在 $CLK$ 变成高电平以后，直到 $Q'$ 新状态建立起来以前，TG<sub>3</sub> 必须保持导通状态，因而 $C$ 和 $C'$ 状态不能改变。考虑到需要经过 G<sub>5</sub> 以后 $C$ 和 $C'$ 状态才开始改变【减去下一次电平变化前的延迟】，所以 $CLK$ 的高电平持续时间 $t_{\rm{wh}}$ 必须大于 $t_{\rm{pdQ'}}-t_{\rm{d}}$，故 $t_{\rm{wh}}$ 的最小值应为 $t_{\rm{min}}=4t_{\rm{d}}$。由此即可得到最高时钟频率为
$$f_{\rm{max}}=\frac{1}{t_{\rm{wl(min)}}+t_{\rm{wh(min)}}}=\frac{1}{6t_{\rm{d}}}$$

若 $CLK$ 波形的占空比为 50%，则应取 $t_{\rm{wl}}=t_{\rm{wh}}=4t_{\rm{d}}$，这时的最高时钟频率将是 $1/(8t_{\rm{d}})$。

这里需要提醒一点，就是在以上的分析过程中，我们假设了所有门电路的传输延迟时间是相等的，而实际上每个门电路的传输延迟时间是各不相同的。因此，上面得到的分析结果只能用于定性说明有关的物理概念。

通过对这个例子的分析还可以看到，触发器的动态参数取决于电路结构形式以及其中每个门电路的传输延迟时间，所以各种触发器的动态参数随电路结构形式和内部电路参数的不同而异。而且，这些电路参数又有一定的分散性。实际上每种集成电路触发器产品的动态参数最后都要通过实验来测定，然后给出参数的范围。

## 5.4 寄存器

寄存器（Register）能够寄存一组二值代码，它被广泛应用于数字计算机和各种复杂数字系统当中。

由于一个触发器能够储存一位二值代码，所以用 N 个触发器组成的寄存器能够储存一组 N 位的二值代码。为了满足与周围相连电路快速进行数据交换的需要，寄存器通常都采取所谓“透明”的电路结构形式，即每个触发器的输入端和输出端都被直接引出。在采用 LSI 工艺实现的数字系统中，这些寄存器通常都已经集成在 LSI 器件内部了。此外，也有作成标准化集成电路产品的寄存器可供选用。

对寄存器中的触发器只要求它们具有置 1、置 0 的功能即可，因而无论是用电平触发的触发器，还是用脉冲触发或边沿触发的触发器，都可以组成寄存器。

图 5.4.1 是一个用电平触发的 D 触发器组成的 4 位寄存器的实例—74LS75 的逻辑图。由电平触发的动作特点可知，在 $CLK$ 的高电平期间 $Q$ 端的状态跟随 $D$ 端状态而变，在 $CLK$ 变成低电平以后，$Q$ 端将保持 $CLK$ 变为低电平时刻 $D$ 端的状态。

74HC175 则是用 CMOS 边沿触发器组成的 4 位寄存器，它的逻辑图如图 5.4.2 所示。根据边沿触发的动作特点可知，触发器输出端的状态仅仅取决于 CLK 上升沿到达时刻 D 端的状态。可见，虽然 74LS75 和 74HC175 都是 4 位寄存器，但由于采用了不同结构类型的触发器，所以动作特点是不同的。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.4.1_74LS75的逻辑图.png"/><br>
</div>

为了增加使用的灵活性，在有些寄存器电路中还附加了一些**控制电路**，使寄存器又增添了**异步置 0**、**输出三态控制**和“**保持**”等功能。这里所说的“保持”，是指 $CLK$ 信号到达时触发器不随 $D$ 端的输入信号而改变状态，保持原来的状态不变。

在上面介绍的两个寄存器电路中，接收数据时所有各位代码是同时输入的，而且触发器中的数据是**并行地出现在输出端**的，因此将这种输入、输出方式称为**并行输入**、**并行输出**方式。

## 5.5 存储器

**存储器**是一种能够存储大量二值信息（或称为数据）的器件。由于计算机以及其他一些数字系统的工作过程中，都需要对大量的数据进行存储，所以存储器也就成了计算机和这些数字系统不可缺少的组成部分。在这里我们只讨论用半导体集成电路制成的各种半导体存储器。

由于计算机需要处理的数据量越来越大，运算速度越来越高，这就要求存储器具有更大的存储容量和更快的存取速度。因此，**存储容量**和**存取速度**是衡量存储器性能的两个最重要的指标。

因为半导体存储器的存储单元数目极其庞大而器件的引脚数目有限，所以在电路结构上就不可能像寄存器那样把每个存储单元的输入和输出直接引出。为了解决这个矛盾，在存储器中给每个存储单元编了一个**地址**，只有被输人地址代码指定的那些存储单元才能与公共的输入/输出引脚接通，进行数据的读出或写入。

半导体存储器的种类很多，首先从存、取功能上可以分为**随机存储器**（Random-Access Memory，简称 **RAM**）和**只读存储器**（Read-Only Memory，简称 **ROM**）两大类。

随机存储器与只读存储器的根本区别在于，正常工作状态下就可以随时快速地向存储器里写入数据或从中读出数据。根据所采用的存储单元工作原理的不同，又将随机存储器分为**静态存储器**（Static Random-Access Memory，简称 **SRAM**）和**动态存储器**（Dynamic Random-Access Memoy，简称 **DRAM**）。由于动态存储器存储单元的结构非常简单，所以它所能达到的集成度远高于静态存储器。但是动态存储器的存取速度不如静态存储器快。由于断电以后随机存储器中数据将随之消失，所以不宜用它保存那些需要长期保存的数据。

只读存储器在正常工作状态下只能从中读取数据，不能快速地随时修改或重新写入数据。ROM 的优点是电路结构简单，而且在断电以后数据不会丢失。它的缺点是只适用于存储那些固定数据的场合。只读存储器中又有**掩模 ROM**、**可编程 ROM**（Programmable Read-Only Memory，简称 PROM）和**可擦除的可编程 ROM**（Erasable Programmable Read-Only Memory，简称 EPROM）几种不同类型。

- 掩模 ROM 中的数据在制作时已经确定，无法更改。
- PROM 中的数据可以由用户根据自己的需要写入，但一经写入以后就不能再修改了。
- EPROM 里的数据则不但可以由用户根据自己的需要写人，而且还能擦除重写，所以具有更大的使用灵活性。但由于擦除改写的速度较慢，而且需要置于不同于正常读出的工作状态，所以通常仍将 EPROM 用作只读存储器。

### 5.5.1 静态随机存储器（SRAM）

#### 一、SRAM 的结构和工作原理

SRAM 电路通常由**存储矩阵**、**地址译码器**和**读/写控制电路**（也称**输入/输出电路**）三部分组成，如图 5.5.1 所示。

存储矩阵由许多**存储单元**排列而成，每个存储单元能存储 1 位二值数据（1 或 0），在译码器和读/写电路的控制下，既可以写入 1 或 0，又可以将存储的数据读出。

地址译码器一般都分成**行地址译码器**和**列地址译码器**两部分。行地址译码器将输入地址代码的若干位译成某一条字线的输出高、低电平信号，从存储矩阵中选中一行存储单元；列地址译码器将输入地址代码的其余几位译成某一根输出线上的高、低电平信号，从字线选中的一行存储单元中再选 1 位（或几位），使这些被选中的单元经读/写控制电路与输入/输出端接通，以便对这些单元进行读、写操作。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.1_SRAM的结构框图.png"/><br>
</div>

读/写控制电路用于对电路的工作状态进行控制。当读/写控制信号 $R/W'=1$ 时，执行**读操作**，将存储单元里的数据送到输入/输出端上。当 $R/W'=0$ 时，执行**写操作**，加到输入/输出端上的数据被写入存储单元中。图中的双向箭头表示一组可**双向传输数据**的导线，它所包含的导线数目等于并行输入/输出数据的位数。多数 RAM 集成电路是用一根读/写控制线控制读/写操作的，但也有少数的 RAM 集成电路是用两个输入端分别进行读和写控制的。

在读/写控制电路上都设有**片选输人端** $CS'$。当 $CS'=0$ 时 RAM 为正常工作状态：当 $CS'=1$ 时所有的输入/输出端均为**高阻态**，不能对 RAM 进行读/写操作。

在多位数据并行输出的存储器中，习惯上将并行输出的一组数据叫做一个“字”（word），存储器的每个地址中存放一个字。存储器的容量用存储单元的数量表示，通常写成“（字数）×（每个字的位数）”的形式。

图 5.5.2 是一个 1024×4 位 SRAM 的结构框图，其中 4096 个存储单元排列成 64 行 × 64 列的矩阵。**10 位输人地址代码分成两组译码**。$A_4\sim A_9$ 6 位地址码加到**行地址译码器**上，用它的输出信号从 64 行存储单元中选出指定的一行。另外 4 位地址码加到**列地址译码器**上，利用它的输出信号再从已选中的一行里挑出要进行读/写的 4 个存储单元。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.2_结构框图.png"/><br>
</div>

- $I/O_1\sim I/O_4$ 既是**数据输入端**又是**数据输出端**。读/写操作在 $R/W'$ 和 $CS'$ 信号的控制下进行。当 $CS'=0$，且 $R/W'=1$ 时，读/写控制电路工作在读出状态。这时由地址译码器选中的 4 个存储单元中的数据被送到 $I/O_1\sim I/O_4$。
- 当 $CS'=0$，且 $R/W'=0$ 时，执行写入操作。这时读/写控制电路工作在写入工作状态，加到 $I/O_1\sim 1/O_4$ 端的输人数据便被写入指定的 4 个存储单元中去。
- 若令 $CS=1$，则所有的 $I/O$ 端均处于**禁止态**，将存储器内部电路与外部连线隔离。因此，可以直接将 $I/O_1\sim I/O_4$ 与系统总线相连，或将多片存储器的输人/输出端并联运用。

##### 二、SRAM 的静态存储单元

**静态存储单元是在 SR 锁存器的基础上附加门控管而构成的。因此，它是靠锁存器的自保功能存储数据的**。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.3_六管CMOS静态存储单元.png"/><br>
</div>

图 5.5.3 是用六只 MOS 管组成的 CMOS 静态存储单元。其中的 T<sub>1</sub>\~T<sub>4</sub> 组成 SR 锁存器，用于记忆 1 位二值代码。其中 T<sub>1</sub>、T<sub>2</sub> 和 T<sub>3</sub>、T<sub>4</sub> 分别接成了反相器 G<sub>1</sub> 和 G<sub>2</sub>。为了减少输入、输出连线的数目，将 G<sub>1</sub> 的输出端与 G<sub>2</sub> 的输入端相连，既可在写入时作为置 1 输入端，又可在读出时作为置 1 输出端。同理，将 G<sub>2</sub> 的输出端与 G<sub>1</sub> 的输入端相连，既可在写入时作为置 0 输入端，又可在读出时作为置 0 输出端。T<sub>5</sub> 和 T<sub>6</sub> 是门控管，作模拟开关使用，以控制锁存器的 $Q$、$Q'$ 和位线 $B_j$、$B_j'$ 之间的联系。T<sub>5</sub>、T<sub>6</sub> 的开关状态由字线 $X_i$ 的状态决定。$X_i=1$ 时 T<sub>5</sub>、T<sub>6</sub> 导通，锁存器的 $Q$ 和 $Q'$ 端与位线 $B_j$、$B_j'$ 接通；$X_i=0$ 时 T<sub>5</sub>、T<sub>6</sub> 截止，锁存器与位线之间的联系被切断。T<sub>7</sub>、T<sub>8</sub> 是每一列存储单元公用的两个门控管，用于和读/写缓冲放大器之间的连接。T<sub>7</sub>、T<sub>8</sub> 的开关状态由列地址译码器的输出 $Y_j$ 来控制，$Y_j=1$ 时导通，$Y_j=0$ 时截止。

存储单元所在的一行和所在的一列同时被选中以后，$X_i=1$、$Y_j=1$，T<sub>5</sub>、T<sub>6</sub>、T<sub>7</sub>、T<sub>8</sub> 均处于导通状态。$Q$ 和 $Q'$ 与 $B_j$ 和 $B_j'$ 接通。

- 如果这时 $CS'=0$、$R/W'=1$，则读/写缓冲放大器的 $A_1$ 接通、$A_2$ 和 $A_3$ 截止，$Q$ 端的状态经 $A_1$ 送到 $I/O$ 端，实现数据读出。
- 若此时 $CS'=0$、$R/W'=0$，则 $A_1$ 截止、$A_2$ 和 $A_3$ 导通，加到 $I/O$ 端的数据被写入存储单元中。

采用 CMOS 工艺的 SRAM 不仅正常工作时功耗很低，而且还能在降低电源电压的状态下保存数据，因此它可以在交流供电系统断电后用电池供电以继续保持存储器中的数据不致丢失，用这种方法弥补半导体随机存储器数据易失的缺点。例如，Intel 公司生产的超低功耗 CMOS 工艺的 SRAM5101L 用 +5 V 电源供电，静态功耗仅 1\~2 μW。如果将电源电压降至 +2 V 使之处于低压保持状态，则功耗可降至 O.28 μW。双极型的 SRAM 虽然工作速度比较快，但功耗很大，所以除了在某些超高速系统中还有应用以外，一般就很少应用了。

### 5.5.2 动态随机存储器（DRAM）

#### 一、DRAM 的动态存储单元

**DRAM 的动态存储单元是利用 MOS 电容可以存储电荷的原理制成的**。由于存储单元的结构能做得非常简单，所以在**大容量**、**高集成度**的 RAM 中得到了普遍的应用。但由于 MOS 电容的容量很小（通常仅为**几皮法**），而漏电流又不可能绝对等于零，所以电荷保存的时间有限。为了及时补充漏掉的电荷以避免存储的信号丢失，必须定时地给电容补充电荷，通常将这种操作称为**刷新**或**再生**。因此，DRAM 工作时必须辅以必要的**刷新控制电路**（控制电路通常是做在 DRAM 芯片内部的），同时也使操作复杂化了。尽管如此，DRAM 仍然是目前大容量 RAM 的主流产品。

早期采用的动态存储单元为四管电路或三管电路。这两种电路的优点是外围控制电路比较简单，读出信号也比较大，而缺点是电路结构仍不够简单，不利于提高集成度。**单管动态存储单元**是所有存储单元中电路结构最简单的一种。虽然它的外围控制电路比较复杂，但由于在提高集成度上所具有的优势，使它成为目前所有大容量 DRAM 首选的存储单元。

图 5.5.4 是**单管动态 MOS 存储单元**的电路结构图。存储单元由一只 N 沟道增强型 MOS 管 T 和一个电容 $C_{\rm{S}}$ 组成。

<div align=center>
<img width=40% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.4_单管动态MOS存储单元.png"/><br>
</div>

在进行写操作时，字线给出高电平，使 T 导通，位线上的数据便经过 T 被存入 $C_{\rm{S}}$ 中。

在进行读操作时，字线同样应给出高电平，并使 T 导通。这时 $C_{\rm{S}}$ 经 T 向位线上的电容 $C_{\rm{B}}$ 提供电荷，使位线获得读出的信号电平。设 $C_{\rm{S}}$ 上原来存有正电荷，电压 $v_{C_{\rm{S}}}$ 为高电平，而位线电位 $v_{\rm{B}}=0$，则执行读操作以后位线电平将上升为
$$v_{\rm{B}}=\frac{C_{\rm{S}}}{C_{\rm{S}}+C_{\rm{B}}}v_{C_{\rm{S}}}  \tag{5.5.1}$$
因为在实际的存储器电路中的位线上总是同时接有很多存储单元，使 $C_{\rm{B}}\gg C_{\rm{S}}$，所以位线上读出的电压信号很小。

例如，读出操作以前 $v_{C_{\rm{S}}}=5\rm{V}$，$C_{\rm{S}}/C_{\rm{B}}=1/50$，则位线上的读出信号将仅有 0.1 V。而且在读出以后 $C_{\rm{S}}$ 上的电压也只剩下 O.1 V，所以这是一种破坏性读出。因此，需要在 DRAM 中设置灵敏的检测放大器，**一方面将从位线上读出信号加以放大**，**另一方面将存储单元里原来存储的信号恢复**。

##### 二、DRAM 的总体结构

为了在提高集成度的同时减少器件引脚的数目，目前的大容量 DRAM 多半都采用 1 位输入、1 位输出和地址分时输入（亦称“地址多路复用”）的方式。

图 5.5.5 是一个 1 M × 1 位 DRAM 总体结构的框图。从总体上讲，它除了包含**存储矩阵**、**地址译码器**和**输入/输出电路**三个组成部分以外，还增加了一套**刷新控制电路**。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.5_1M1位DRAM的结构框图.png"/><br>
</div>

在进行读/写操作时，地址代码是分两次从同一组引脚输入的。分时操作由 $RAS'$ 和 $CAS'$ 两个时钟信号来控制。首先令 $RAS'=0$，输人地址代码的 $A_0\sim A_9$ 位，然后令 $CAS'=0$，再输入地址代码的 $A_10\sim A_19$ 位。$A_0\sim A_9$ 被送到行地址锁存器，行地址译码器的输出从存储矩阵的 1024 行中选中一行；$A_10\sim A_19$ 被送往列地址锁存器，列地址译码器的输出再从行地址译码器选中的一行中选出一位。

当 $R/W'=1$ 时进行读操作，被输人地址代码选中单元中的数据经过输出数据选择器和输入/输出电路中的三态缓冲器到达数据输出端 $D_{\rm{OUT}}$。当 $R/W'=0$ 时进行写操作，加到数据输入端 $D_{\rm{IN}}$ 的数据经过输人数据分配器和输入/输出电路中的三态缓冲器写入由输入地址指定的单元中去。

刷新控制电路包括**刷新操作信号**及**时钟信号发生器**、**刷新计数器**和**行地址数据选择器**等几部分。对存储单元刷新操作的基本形式是以行为单位逐行进行的。启动刷新操作后，刷新计数器从 0 开始计数。计数器输出的 10 位二进制代码经过行地址数据选择器加到行地址译码器上，行地址译码器的输出依次给出 1024（0\~1023）个行地址。在刷新控制信号的操作下，被选中一行中所有单元中的数据将被重新写回到原来的单元中。这种刷新操作是自动进行的，每隔 10s 左右必须进行一次，以确保存储单元里的数据不至于丢失。在刷新操作过程中不能进行正常的数据读/写。

为了提高刷新操作的效率，以适应各种应用场合的需要，在有些 DRAM 中还对刷新操作形式作了许多改进，这里就不作具体介绍了。

### 5.5.3 只读存储器（ROM）

在存储器的某些应用场合中，要求存储的是一些固定不变的数据（例如计算机里的字库）。正常工作状态下，这些数据只供读出使用，不需要随时进行修改。为了适应这种需要，又产生了另外一种类型的存储器—**只读存储器**（Read-Only Memory，简称 ROM）。

ROM 的特点在于：所存储的数据是固定的、预先写好的。正常工作时，这些数据只能读出，不能随时写入或修改。

由此我们就想到，按照这种要求，只要将只读存储器中每个存储单元的输出接到固定的高电平（当要求记入 1 时）或者低电平（当要求记入 0 时）就行了。这样就可以使存储单元的电路结构大为简化，不再需要使用锁存器或者触发器作为存储单元。

#### 一、ROM 的结构和工作原理

ROM 的电路结构包含存储矩阵、地址译码器和输出缓冲器三个组成部分，如图 5.5.6 所示。存储矩阵由许多存储单元排列而成。存储单元可以用**二极管**构成，也可以用**双极型三极管**或 **MOS 管**构成。每个单元能存放 1 位二值代码（0 或 1）。每一个或一组存储单元有一个对应的地址代码。通常 ROM 都采用多位数据并行输出的结构形式，每个输人地址同时选中一组存储单元。

<div align=center>
<img width=50% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.6_ROM的电路结构框图.png"/><br>
</div>

地址译码器的作用是将输入的地址代码译成相应的控制信号，利用这个控制信号从存储矩阵中将指定的单元选出，并把其中的数据送到输出缓冲器。

**输出缓冲器**的作用有两个，**一是能提高存储器的带负载能力**，**二是实现对输出状态的三态控制，以便与系统的总线连接**。

图 5.5.7 是具有 2 位地址输入码和 4 位数据输出的 ROM 电路，它的存储单元由二极管构成。它的地址译码器由 4 个二极管与门组成。2 位地址代码 $A_1A_0$ 能给出 4 个不同的地址。地址译码器将这 4 个地址代码分别译成 $W_0\sim W_3$ 4 根线上的高电平信号。存储矩阵实际上是由 4 个二极管或门组成的编码器，当 $W_0\sim W_3$ 每根线上给出高电平信号时，都会在 $d_0\sim d_3$ 根线上输出一个 4 位二值代码。通常将每个输出代码称为一个“字”，并将 $W_0\sim W_3$ 称为字线，将 $d_0\sim d_3$ 称为位线（或数据线），而 $A_1$、$A_0$。称为**地址线**。输出端的缓冲器用来提高带负载能力，并将输出的高、低电平变换为标准的逻辑电平。同时，通过给定 $EN'$ 信号实现对输出的三态控制。

在读取数据时，只要输入指定的地址码并令 $EW'=0$，则指定地址内各存储单元所存的数据便会出现在输出数据线上。例如，当 $A_1A_0=10$ 时，$W_2=1$，而其他字线均为低电平。由于只有 $d_2$ 一根线与 $W_2$ 间接有二极管，所以这个二极管导通后使 $d_2$ 为高电平，而 $d_0$、$d_1$ 和 $d_3$ 为低电平。于是在数据输出端得到 $D_3D_2D_1D_0=0100$。全部 4 个地址内的存储内容列于表 5.5.1 中。

<div align=center>
<img width=30% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.5.1_ROM中的数据表.png"/><br>
</div>

不难看出，字线和位线的每个交叉点都是一个存储单元。交点处接有二极管时相当于存 1，没有接二极管时相当于存 0。交叉点的数目也就是存储单元数。从图 5.5.7 中还可以看到，ROM 的电路结构很简单，所以集成度可以做得很高，而且一般都是批量生产，价格便宜。

采用 M0S 工艺制作 R0M 时，**译码器**、**存储矩阵**和**输出缓冲器**全用 MOS 管组成。图 5.5.8 给出了 MOS 管存储矩阵的原理图。在大规模集成电路中 MOS 管多做成对称结构，同时也为了画图的方便，一般都采用图中所用的简化画法。

图 5.5.8 中以 N 沟道增强型 M0S 管代替了图 5.5.7 中的二极管。**字线与位线的交叉点上接有 MOS 管时相当于存 1，没有接 MOS 管时相当于存 0**。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.8_用MOS管构成的存储矩阵.png"/><br>
</div>

当给定地址代码后，经译码器译成 $W_0\sim W_3$ 中某一根字线上的高电平，使接在这根字线上的 MOS 管导通，并使与这些 MOS 管漏极相连的位线为低电平，经输出缓冲器反相后，在数据输出端得到高电平，输出为 1。图 5.5.8 存储矩阵中所存的数据与表 5.5.1 中的数据相同。

#### 二、ROM 的分类

##### 1. 掩膜只读存储器（Mask ROM）

在采用掩模工艺制作 ROM 集成电路芯片时，其中存储的数据是由制作过程中使用的**掩模板**决定的。这种掩模板是按照用户的要求而专门设计的。因此，掩模 ROM 在出厂时内部存储的数据就已经“固化”在里边了。由于这种 ROM 的制作周期较长，而且制作版图的成本又比较高，所以多用于大批量、定型的电子产品中。

##### 2. 可编程只读存储器（PROM）

在开发数字电路新产品的工作过程中，设计人员经常需要按照自己的设想迅速得到存有所需内容的 ROM。这时可以通过将所需内容自行写入 PROM 而得到要求的 ROM。对 PROM 的编程需要在编程器上完成。

PROM 的总体结构与掩模 ROM 一样，同样由存储矩阵、地址译码器和输出电路组成。不过在出厂时已经在存储矩阵的所有交叉点上全部制作了存储元件，即相当于在所有存储单元中都存入了 1。

<div align=center>
<img width=20% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.9_熔丝型PROM的存储单元.png"/><br>
</div>

图 5.5.9 是熔丝型 PROM 存储单元的原理图，它由一只三极管和串在发射极的快速熔断丝组成。三极管的 be 结相当于接在字线与位线之间的二极管。**熔丝用很细的低熔点合金丝或多晶硅导线制成**。在写入数据时只要设法将需要存入 0 的那些存储单元上的熔丝烧断就行了。因为这种熔丝在集成电路中所占的面积较大，所以后来又出现了所谓“反熔丝结构”的 PROM。反熔丝结构 PROM 中的可编程连接点上不是熔丝，而是一个绝缘连接件（通常用特殊的绝缘材料或两个反相串联的肖特基势垒二极管）。未编程时所有的连接件均不导通，而在连接件上施加编程电压以后，绝缘被永久性击穿，连接点的两根导线被接通。

图 5.5.10 是一个 16 × 8 位 PR0M 的结构原理图。使用编程器编程时，首先应输人地址代码，找出要写人 0 的单元地址。然后使 $V_{\rm{CC}}$ 和选中的字线提高到编程所要求的高电平，同时在编程单元的位线上加入**编程脉冲（幅度约 20 V,持续时间约十几微秒）**。这时写入放大器 $A_{\rm{W}}$ 的输出为低电平、低内阻状态，有较大的脉冲电流流过熔丝，将其熔断，使存储单元变成 0 状态。正常工作时读出放大器 $A_{\rm{R}}$ 输出的高电平不足以使 $D_{\rm{Z}}$ 导通，$A_{\rm{W}}$ 不工作。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.10_PROM的结构原理图.png"/><br>
</div>

可见，PROM 的内容一经写入以后，就不可能修改了，所以它只能写入一次。因此，PROM 仍不能满足研制过程中经常修改存储内容的需要。这就要求生产一种可以擦除重写的 ROM。

##### 3.用电信号擦除的可编程只读存储器—闪存（Flash Memory）

由于可擦除的可编程 ROM（EPROM）中存储的数据可以擦除重写，因而在需要经常修改 ROM 中内容的场合它便成为一种比较理想的器件。

最早研究成功并投入使用的 EPROM 是用**紫外线照射进行擦除**的，并被称之为 **EPROM**。因此，当初一提到 EPROM 就是指的这种**用紫外线擦除的可编程 ROM**（Ultra-Violet Erasable Programmable Read-Only Memory，简称 UVEPROM）。

不久又出现了用电信号擦除的可编程 ROM（Electrically Erasable Programmable Read-Only Memory，简称 E<sup>2</sup>PROM）。后来又研制成功了新一代的**用电信号擦除的可编程 ROM**—**快闪存储器**（Flash Memory），即通常所说的“**闪存**”。

**闪存的存储单元是一只浮栅 MOS 管**（Floating-Gate MOSFET），图 5.5.11 是它的结构示意图。在浮栅 MOS 管中，除了控制栅 $G_{\rm{e}}$ 以外，还在控制栅和衬底之间又增加了一个**浮置栅** $G_{\rm{f}}$。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.11_闪存中的浮栅MOS管.png"/><br>
</div>

图 5.5.12 是闪存的存储单元在存储矩阵中的连接图。在读出状态下，若浮置栅 $G_{\rm{f}}$ 上充有负电荷，则当字线给出逻辑高电平信号时浮栅 MOS 管截止，位线上输出高电平；若浮置栅上没充有电荷，则当字线给出逻辑高电平信号时浮栅 MOS 管导通，位线上输出低电平。因此，**浮置栅上充有负电荷时相当于存储单元存有“1”，而浮置栅上没充有电荷时相当于存储单元存有“0”**。

**在写入状态下，浮置栅的充电是利用雪崩注入的方法实现的**。执行写入操作时，浮栅 MOS 管的漏极经位线接至一个较高的正电压（一般为 6 V 左右），$V_{\rm{SS}}$ 接 0 电平，同时在控制栅上加一个幅度 12 V 左右的正脉冲。这时漏极-源极间将发生雪崩击穿，一部分速度高的电子便穿过氧化层到达浮置栅，在浮置栅上形成充电电荷。浮置栅充电以后，浮栅 MOS 管的开启电压在 7 V 以上，字线给出的正常逻辑高电平不足以使它导通。

闪存的擦除操作是利用隧道效应进行的。浮置栅与源极之间有一个面积很小、氧化层极薄（厚度在 20 nm 以下）的交叠区，称为**隧道区**。当隧道区的电场强度大到一定程度时（$>10^7\rm{V/cm}$），便在隧道区出现导电隧道，电子可以双向通过，形成电流。这种现象称为隧道效应。【从源极抽取电子（写入）或者将电子抽向源极（擦除）】

执行擦除操作时，令控制栅处于 0 电平，同时在源极 $V_{\rm{SS}}$ 接入幅度为 12 V 左右、宽度约 100 ms 的正脉冲。由于浮置栅-源极之间的电容比控制栅-浮置栅之间的电容小得多，所以这个脉冲电压几乎全加到了隧道区上，使隧道区产生导电隧道，于是浮置栅上的电荷便经导电隧道释放。浮置栅放电以后，浮栅 MOS 管的开启电压在 2 V 以下。当字线给出的逻辑高电平（+5 V 或 +3.3 V）加到浮栅 MOS 管的控制栅时，它一定导通。

对于采用如图 5.5.8 所示的**或非结构形式的闪存**（亦称 **NOR 闪存**），其中所有的源极都是连在一起的，所以当在源极上加高电压进行擦除时，所有字线为零的那些字节中的存储单元将同时被擦除。利用这个特点，在对一个大容量闪存进行擦除时，就可以将它划分成几个区。每次将一个区内的全部存储单元一次同时擦除，从而大大提高了擦除速度。相比之下，编程写入的速度要慢得多。**目前闪存的读出周期大约在几十至二百纳秒的范围，而写入一个字节的周期需要十到五十微秒的时间**。由于随机存储器必须满足快速存/取的要求（**SRAM 的存/取周期多在十几到几十纳秒**），闪存不能满足要求，所以通常情况下闪存仍然只能作为只读存储器使用。

闪存的编程和擦除操作不需要使用编程器，写入和擦除的控制电路集成于存储器芯片中，工作时只需要 5 V 的低压电源，使用极其方便。

由于浮栅 MOS 管浮置栅下面的氧化层极薄，经过多次编程以后可能发生损坏，所以目前闪存的编程次数是有限的，一般在 10000\~100000 次之间。随着制造工艺的改进，可编程的次数有望进一步增加。

自从 20 世纪 80 年代末期闪存问世以来，便以其高集成度、大容量、低成本和使用方便等优点而引起普遍关注。随着产品集成度的逐年提高和价格的逐年下降，闪存的应用领域得到了迅速扩展。闪存已经被广泛地应用在手机、数码相机、mp3、U 盘、平板电脑等各种便携式的电子产品中。目前容量达 128 G 位的 U 盘已经面市。而且，在不久的将来，闪存有可能成为较大容量磁性存储器（例如 PC 机中的硬磁盘）的替代产品。

### 5.5.4 存储器容量的扩展

当使用一片 ROM 或 RAM 器件不能满足对存储容量的要求时，就需要将若干片 ROM 或 RAM 组合起来，形成一个容量更大的存储器。

#### 一、位扩展方式

如果每一片 ROM 或 RAM 中的字数已经够用而每个字的位数不够用，则应采用位扩展的连接方式，将多片 ROM 或 RAM 组合成位数更多的存储器。【所有的位共享相同的地址】

RAM 的位扩展连接方法如图 5.5.13 所示。在这个例子中，用 8 片 1024 × 1 位的 RAM 接成了一个 1024 × 8 位的 RAM。

<div align=center>
<img width=60% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.13_RAM的位扩展接法.png"/><br>
</div>

连接的方法十分简单，只需将 8 片的所有**地址线**、$R/W'$、$CS'$ 分别并联起来就行了。每一片的 $I/O$ 端作为整个 RAM 输入/输出数据端的一位。总的存储容量为每一片存储容量的 8 倍。

ROM 芯片上没有读/写控制端 $R/W'$，在进行位扩展时其余引出端的连接方法和 RAM 完全相同。

#### 二、字扩展方式

如果每一片存储器的数据位数够用而字数不够用，则需要采用字扩展方式，将多片存储器（RAM 或 ROM）芯片接成一个字数更多的存储器。

图 5.5.14 是用字扩展方式将 4 片 256 × 8 位的 RAM 接成一个 1024 × 8 位 RAM 的例子。因为 4 片中共有 1024 个字，所以必须给它们编成 1024 个不同的地址。然而每片集成电路上的地址输入端只有 8 位（$A_0\sim A_7$），给出的地址范围全都是 0\~255，无法区分 4 片中同样的地址单元。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\图5.5.14_RAM的字扩展接法.png"/><br>
</div>

因此，必须增加两位地址代码 $A_8$、$A_9$ 使地址代码增加到 10 位，才能得到 $2^{10}=1024$ 个地址。如果取第一片的 $A_9A_8=00$，第二片的 $A_9A_8=01$，第三片的 $A_9A_8=10$，第四片的 $A_9A_8=11$，那么 4 片的地址分配将如表 5.5.2 中所示。

<div align=center>
<img width=80% src="computer_science\digital_electronics\数字电子技术基础_阎石\image\表5.5.2_各片RAM电路的地址分配.png"/><br>
</div>

由表 5.5.2 可见，4 片 RAM 的低 8 位地址是相同的，所以接线时将它们分别并联起来就行了。由于每片 RAM 上只有 8 个地址输入端，所以 $A_8$、$A_9$ 的输入端只好借用 $CS'$ 端。图中使用 2 线-4 线译码器将 $A_9A_8$ 的 4 种编码 00、01、10、11 分别译成 $Y_0'$、$Y_1'$、$Y_2'$、$Y_3'$ 个低电平输出信号，然后用它们分别去控制 4 片 RAM 的 $CS'$ 端。

此外，由于每一片 RAM 的数据端 $I/O_1\sim I/O_8$。都设置了由 $CS'$ 控制的三态输出缓冲器，而现在它们的 $CS'$ 任何时候只有一个处于低电平，故可将它们的数据端并联起来，作为整个 RAM 的 8 位数据输入/输出端。

上述字扩展接法也同样适用于 ROM 电路。

如果一片 RAM 或 ROM 的位数和字数都不够用，就需要同时采用位扩展和字扩展方法，用多片器件组成一个大的存储器系统，以满足对存储容量的要求。
